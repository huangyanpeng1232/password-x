import{ad as F,o as v,I as k,ap as E}from"./@vue-8e6a53e5.js";import{c as T,a as _}from"./vue-router-c2e97886.js";import{c as A}from"./vuex-7c7bb3a2.js";import{C as O}from"./cos-js-sdk-v5-31c61e27.js";import{O as P}from"./ali-oss-21f5c855.js";import{m as f}from"./js-md5-11f5a111.js";import{C as d}from"./crypto-js-d55471a7.js";import{c as M}from"./vue-i18n-3214f365.js";import"./element-plus-6342e0a0.js";import"./@intlify-6e8dbf92.js";import"./lodash-es-f5bdeb48.js";import"./async-validator-dee29e8b.js";import"./@vueuse-9ffc2ac5.js";import"./@element-plus-169d18e8.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./escape-html-cf2a8097.js";import"./normalize-wheel-es-ed76fb12.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();let w="password-x/";async function D(e){return new Promise((t,r)=>{const s=new O({SecretId:e.keyId,SecretKey:e.keySecret});s.getBucket({Bucket:e.bucket,Region:e.region,Prefix:"password-x/",MaxKeys:1},function(a,o){a?r(a):t(s)})})}function I(e,t){return new Promise((r,s)=>{i.state.database.putObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e,Body:JSON.stringify(t)},function(a,o){a?s(a):r(o)})})}function C(e){return new Promise((t,r)=>{i.state.database.getObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e},function(s,a){a?t(JSON.parse(a.Body)):s&&s.statusCode!==404?r(s):t({})})})}function L(e){return new Promise((t,r)=>{i.state.database.deleteObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e},function(s,a){s?r(s):t(a)})})}const R=Object.freeze(Object.defineProperty({__proto__:null,delFile:L,getFile:C,login:D,putFile:I},Symbol.toStringTag,{value:"Module"}));let y="password-x/";async function N(e){return new Promise((t,r)=>{const s=new P({accessKeyId:e.keyId,accessKeySecret:e.keySecret,region:e.region,bucket:e.bucket});s.list({"max-keys":1}).then(()=>{t(s)}).catch(a=>{r(a)})})}function B(e,t){let r={"x-oss-storage-class":"Standard","x-oss-object-acl":"private","x-oss-forbid-overwrite":"true"};return new Promise((s,a)=>{let o=new P.Buffer(JSON.stringify(t));i.state.database.put(y+e,o,r).then(n=>{s(n)}).catch(n=>{a(n)})})}function K(e){return new Promise((t,r)=>{i.state.database.get(y+e).then(s=>{t(JSON.parse(s.content))}).catch(s=>{s.status===404?t({}):r(s)})})}function V(e){return i.state.database.delete(y+e)}const $=Object.freeze(Object.defineProperty({__proto__:null,delFile:V,getFile:K,login:N,putFile:B},Symbol.toStringTag,{value:"Module"})),g={cos:R,oss:$};async function U(e){return new Promise((t,r)=>{g[e.type].login(e).then(s=>{i.commit("setDatabase",s),i.commit("setDatabaseForm",e),t(s)}).catch(s=>{r(s)})})}function he(e,t){let r=i.state.databaseForm.type;return g[r].putFile(e,t)}function Pe(e){let t=i.state.databaseForm.type;return g[t].getFile(e)}function xe(e){let t=i.state.databaseForm.type;return g[t].delFile(e)}function j(){let e=window.screen.height,t=window.screen.width,r=navigator.language,s=screen.pixelDepth,o=document.createElement("canvas").getContext("experimental-webgl"),n=o.getExtension("WEBGL_debug_renderer_info"),p=o.getParameter(n.UNMASKED_RENDERER_WEBGL),u="",l=navigator.userAgentData;if(l){let m=l.brands;if(m)for(let c=0;c<m.length;c++)u+=m[c].brand}return f(e+t+r+s+p+u)}function Fe(e,t){try{const r=d.enc.Utf8.parse(t),s=d.enc.Utf8.parse(f(e)),a=d.enc.Utf8.parse("");return d.AES.encrypt(r,s,{iv:a,mode:d.mode.CBC,padding:d.pad.Pkcs7}).ciphertext.toString()}catch{return null}}function G(e,t){try{let r=d.enc.Hex.parse(t),s=d.enc.Base64.stringify(r);const a=d.enc.Utf8.parse(f(e)),o=d.enc.Utf8.parse("");return d.AES.decrypt(s,a,{iv:o,mode:d.mode.CBC,padding:d.pad.Pkcs7}).toString(d.enc.Utf8).toString()}catch{return null}}const i=A({state:{database:null,databaseForm:null,verifyCode:null,mainPasswordType:null},mutations:{setDatabase(e,t){e.database=t},delDatabase(e){e.database=null},setDatabaseForm(e,t){e.databaseForm=t},delDatabaseForm(e){e.databaseForm=null},setVerifyCode(e,t){e.verifyCode=t},delVerifyCode(e){e.verifyCode=null,e.mainPasswordType=null},setMainPasswordType(e,t){e.mainPasswordType=t}},actions:{async isLogin(e){return await new Promise(t=>{if(e.state.database){t(!0);return}let r=localStorage.getItem("databaseForm");if(!r){t(!1);return}let s=G(j(),r);if(!s){t(!1);return}U(JSON.parse(s)).then(()=>{t(!0)}).catch(()=>{t(!1)})})}},modules:{}}),H="modulepreload",J=function(e,t){return new URL(e,t).href},S={},h=function(t,r,s){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=J(o,s),o in S)return;S[o]=!0;const n=o.endsWith(".css"),p=n?'[rel="stylesheet"]':"";if(!!s)for(let m=a.length-1;m>=0;m--){const c=a[m];if(c.href===o&&(!n||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${p}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":H,n||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),n)return new Promise((m,c)=>{l.addEventListener("load",m),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o})},z=[{path:"/",name:"Index",component:()=>h(()=>import("./IndexPage-415bf6f1.js"),["./IndexPage-415bf6f1.js","./exceljs-6b62d6db.js","./ali-oss-21f5c855.js","./file-saver-38a5c18e.js","./moment-fbc5633a.js","./vue-i18n-3214f365.js","./@intlify-6e8dbf92.js","./@vue-8e6a53e5.js","./element-plus-6342e0a0.js","./lodash-es-f5bdeb48.js","./async-validator-dee29e8b.js","./@vueuse-9ffc2ac5.js","./@element-plus-169d18e8.js","./@ctrl-f8748455.js","./@popperjs-c75af06c.js","./escape-html-cf2a8097.js","./normalize-wheel-es-ed76fb12.js","./element-plus-96393cd0.css","./js-md5-11f5a111.js","./crypto-js-d55471a7.js","./vue-router-c2e97886.js","./global-92074fcc.js","./vuex-7c7bb3a2.js","./cos-js-sdk-v5-31c61e27.js","./IndexPage-cf590730.css"],import.meta.url)},{path:"/login",name:"Login",component:()=>h(()=>import("./LoginPage-97e0aa5d.js"),["./LoginPage-97e0aa5d.js","./element-plus-6342e0a0.js","./@vue-8e6a53e5.js","./lodash-es-f5bdeb48.js","./async-validator-dee29e8b.js","./@vueuse-9ffc2ac5.js","./@element-plus-169d18e8.js","./@ctrl-f8748455.js","./@popperjs-c75af06c.js","./escape-html-cf2a8097.js","./ali-oss-21f5c855.js","./normalize-wheel-es-ed76fb12.js","./element-plus-96393cd0.css","./global-92074fcc.js","./vue-router-c2e97886.js","./vue-i18n-3214f365.js","./@intlify-6e8dbf92.js","./vuex-7c7bb3a2.js","./cos-js-sdk-v5-31c61e27.js","./js-md5-11f5a111.js","./crypto-js-d55471a7.js","./LoginPage-940da6e8.css"],import.meta.url)}],x=T({history:_(),routes:z});x.beforeEach((e,t,r)=>{if(e.path==="/login"){r();return}i.dispatch("isLogin").then(s=>{s?r():r({path:"/login"})}).catch(()=>{r({path:"/login"})})});const q={"index.title.passwordCount":"个保存的密码","password.name":"名称","password.address":"地址","password.userName":"用户名","password.password":"密码","password.label":"标签","password.remark":"备注","password.insertTime":"添加时间","password.updateTime":"修改时间","password.label.placeholder":"请选择","index.table.operation":"操作","index.table.share":"分享","index.title.addPassword":"创建密码","index.title.search":"搜索...","index.table.edit":"编辑","index.table.operation.affirmDelete":"确认删除吗？","index.table.operation.affirm":"确认","index.table.operation.cancel":"取消","index.table.operation.delete":"删除","index.table.delete.success":"删除成功","index.mainPassword.changeSuccess":"设置成功","index.table.lock":"已锁定","index.title.strength":"密码强度","index.title.strength.strong":"强","index.title.strength.medium":"中","index.title.strength.weak":"弱","index.title.importExport":"备份/恢复","index.title.importExport.download":"下载模板","index.title.importExport.import":"导入密码","index.title.importExport.export":"导出密码","index.title.logout":"退出登录","login.form.title":"对象存储配置","login.form.region.verify":"请输入region","login.form.accessKeyId.verify":"请输入accessKeyId","login.form.accessKeySecret.verify":"请输入accessKeySecret","login.form.bucket.verify":"请输入bucket","login.form.error.RequestError":"请检查：桶名称、跨域设置、region配置","login.form.error.InvalidAccessKeyId":"keyId错误","login.form.error.SignatureDoesNotMatch":"keySecret错误","login.form.error.AccessDenied":"用户没有访问存储桶权限","login.form.failMessage":"登录失败","login.form.successMessage":"登录成功","mainPasswordSetting.form.passwordsDiff":"两次输入的密码不一致","mainPasswordSetting.form.setMainPassword":"设置主密码","mainPasswordSetting.form.newMainPassword":"新密码","mainPasswordSetting.form.newMainPasswordAffirm":"确认新密码","mainPasswordSetting.form.save":"保存","mainPasswordSetting.forget.message":"请务必设置一个自己能记住的主密码，主密码一但忘记则无法找回，所有保存的密码也无法查看","mainPasswordSetting.gesture.first":"请绘制主密码","mainPasswordSetting.gesture.affirm":"请再次绘制确认","mainPasswordSetting.gesture.reset":"重新绘制","mainPasswordSetting.passwordType.common":"标准","mainPasswordSetting.passwordType.gesture":"手势","mainPasswordVerify.form.title":"验证主密码","mainPasswordVerify.form.mainPassword":"请输入主密码","mainPasswordVerify.form.save":"继续","mainPasswordVerify.form.verify":"验证失败","passwordForm.form.name.verify":"请输入名称","passwordForm.form.addPassword":"添加密码","passwordForm.form.editPassword":"修改密码","passwordForm.generateForm.uppercase":"大写","passwordForm.generateForm.lowercase":"小写","passwordForm.generateForm.number":"数字","passwordForm.generateForm.symbol":"符号","passwordForm.generateForm.length":"长度","passwordForm.generateForm.randomPassword":"生成","passwordForm.generateForm.remark":"备注...","passwordForm.generateForm.save":"保存","passwordForm.generateForm.password.copy":"复制","systemSetting.title":"系统设置","systemSetting.language":"语言","systemSetting.cacheMainPassword":"自动验证主密码","systemSetting.cacheMainPassword.enable":"需要","systemSetting.cacheMainPassword.disabled":"不需要","systemSetting.save":"保存","systemSetting.defaultPasswordRule":"默认密码生成规则","systemSetting.logout":"退出登录","systemSetting.deleteAccount":"注销账户","systemSetting.deleteAccount.text":"账户注销将删除所有保存的密码且不可恢复，如确认注销请输入主密码验证身份","systemSetting.deleteAccount.affirm":"确认注销","systemSetting.deleteAccount.success":"注销成功","systemSetting.deleteAccount.mainPasswordError":"主密码验证失败","systemSetting.updateMainPassword":"修改主密码","systemSetting.passwordRuleVerify":"必须选择一种密码字符类型","systemSetting.topic":"主题","systemSetting.topic.light":"明亮","systemSetting.topic.dark":"暗黑","systemSetting.sort":"排序规则","systemSetting.sort.insertTimeAsc":"添加时间正序","systemSetting.sort.insertTimeDesc":"添加时间倒叙","systemSetting.sort.name":"名称","systemSetting.showPasswordStrength":"密码强度提示","systemSetting.showPasswordStrength.enable":"显示密码强度","systemSetting.showPasswordStrength.disabled":"不显示密码强度","passwordForm.autoGeneratePassword":"添加时自动生成密码","passwordForm.autoGeneratePassword.enable":"需要","passwordForm.autoGeneratePassword.disabled":"不需要","index.title.unlock":"解锁","index.title.lock":"锁定","index.title.setting":"系统设置","index.table.empty":"没有可显示的密码","index.table.label":"标签","mainPasswordSetting.form.mainPasswordError":"主密码验证失败","labelTree.addLabel":"添加标签","labelTree.firstAddLabel":"添加标签","labelTree.title":"标签","labelTree.search.placeholder":"搜索","labelTree.tree.add":"添加","labelTree.tree.remove":"删除","importExport.data.empty":"请按照下载的模板补充密码数据后再导入","importExport.exportName":"密码导出","importExport.importTemplateName":"密码导入模板"},W={"index.title.passwordCount":"saved password","password.name":"name","password.address":"address","password.userName":"username","password.password":"password","password.remark":"remark","password.label":"label","password.insertTime":"add time","password.updateTime":"update time","password.label.placeholder":"Select","index.table.operation":"operations","index.table.share":"share","index.title.addPassword":"create password","index.title.search":"Search...","index.table.edit":"edit","index.table.operation.affirmDelete":"affirm delete?","index.table.operation.affirm":"affirm","index.table.operation.cancel":"cancel","index.table.operation.delete":"delete","index.table.delete.success":"delete success","index.mainPassword.changeSuccess":"setting success","index.table.lock":"Locked","index.title.strength":"password strength","index.title.strength.strong":"Strong","index.title.strength.medium":"medium","index.title.strength.weak":"weak","index.title.importExport":"backup/recover","index.title.importExport.download":"download template","index.title.importExport.import":"import password","index.title.importExport.export":"export password","index.title.logout":"logout","login.form.title":"object storage config","login.form.region.verify":"please input region","login.form.accessKeyId.verify":"please input accessKeyId","login.form.accessKeySecret.verify":"please input accessKeySecret","login.form.bucket.verify":"please input bucket","login.form.error.RequestError":"please check：bucket name、crop setting、region config","login.form.error.InvalidAccessKeyId":"keyId error","login.form.error.SignatureDoesNotMatch":"keySecret error","login.form.error.AccessDenied":"user not have permission to access bucket","login.form.failMessage":"login fail","login.form.successMessage":"login success","mainPasswordSetting.form.passwordsDiff":"The two passwords are different","mainPasswordSetting.form.setMainPassword":"set main password","mainPasswordSetting.form.newMainPassword":"new main password","mainPasswordSetting.form.newMainPasswordAffirm":"new main password affirm","mainPasswordSetting.form.save":"save","mainPasswordSetting.gesture.first":"Please draw the master password","mainPasswordSetting.gesture.affirm":"Please draw again to confirm","mainPasswordSetting.gesture.reset":"repaint","mainPasswordSetting.passwordType.common":"common","mainPasswordSetting.passwordType.gesture":"gesture","mainPasswordSetting.forget.message":"Please be sure to set a master password that you can remember. Once the master password is forgotten, it cannot be retrieved, and all saved passwords cannot be viewed","mainPasswordVerify.form.title":"verify main password","mainPasswordVerify.form.mainPassword":"please input main password","mainPasswordVerify.form.save":"continue","mainPasswordVerify.form.verify":"verify fail","passwordForm.form.name.verify":"please input name","passwordForm.form.addPassword":"new password","passwordForm.form.editPassword":"edit password","passwordForm.generateForm.uppercase":"uppercase","passwordForm.generateForm.lowercase":"lowercase","passwordForm.generateForm.number":"number","passwordForm.generateForm.symbol":"symbol","passwordForm.generateForm.length":"length","passwordForm.generateForm.randomPassword":"generate","passwordForm.generateForm.remark":"Remark...","passwordForm.generateForm.save":"create","passwordForm.generateForm.password.copy":"copy","systemSetting.title":"system setting","systemSetting.language":"language","systemSetting.cacheMainPassword":"auto verify main password","systemSetting.cacheMainPassword.enable":"on","systemSetting.cacheMainPassword.disabled":"off","systemSetting.save":"save","systemSetting.defaultPasswordRule":"default password rule","systemSetting.logout":"logout","systemSetting.deleteAccount":"delete account","systemSetting.deleteAccount.text":"Account logout will delete all saved passwords and cannot be recovered. If you confirm logout, please enter the master password to verify your identity","systemSetting.deleteAccount.affirm":"delete account","systemSetting.deleteAccount.success":"delete account success","systemSetting.deleteAccount.mainPasswordError":"main password verify error","systemSetting.updateMainPassword":"update main password","systemSetting.passwordRuleVerify":"You must select a password character type","systemSetting.topic":"topic","systemSetting.topic.light":"light","systemSetting.topic.dark":"dark","systemSetting.sort":"sort by","systemSetting.sort.insertTimeAsc":"insert time asc","systemSetting.sort.insertTimeDesc":"insert time desc","systemSetting.sort.name":"name","systemSetting.showPasswordStrength":"password strength reminder","systemSetting.showPasswordStrength.enable":"on","systemSetting.showPasswordStrength.disabled":"off","passwordForm.autoGeneratePassword":"automatically generated a password","passwordForm.autoGeneratePassword.enable":"on","passwordForm.autoGeneratePassword.disabled":"off","index.title.unlock":"unlock","index.title.lock":"lock","index.title.setting":"system setting","index.table.empty":"There is no password to display","index.table.label":"label","mainPasswordSetting.form.mainPasswordError":"main password verify error","labelTree.addLabel":"add label","labelTree.firstAddLabel":"add label","labelTree.title":"label","labelTree.search.placeholder":"Search","labelTree.tree.add":"add","labelTree.tree.remove":"delete","importExport.data.empty":"Add the password data according to the downloaded template and then import the password","importExport.exportName":"password export","importExport.importTemplateName":"password import template"},Y="zh-cn",Q=M({legacy:!1,locale:Y,messages:{"zh-cn":q,"en-us":W}}),X=(e,t)=>{const r=e.__vccOpts||e;for(const[s,a]of t)r[s]=a;return r},Z={};function ee(e,t){const r=F("router-view");return v(),k(r)}const te=X(Z,[["render",ee]]);let b=E(te);b.use(x);b.use(Q);b.mount("#app");export{X as _,xe as a,Pe as b,G as d,Fe as e,j as g,U as l,he as p,i as s};
