import{ad as T,o as k,I as _,aq as E}from"./@vue-054857f9.js";import{c as A,a as D}from"./vue-router-e948df84.js";import{c as C}from"./vuex-90336bc0.js";import{C as M}from"./cos-js-sdk-v5-31c61e27.js";import{O as P}from"./ali-oss-21f5c855.js";import{m as f}from"./js-md5-11f5a111.js";import{C as d}from"./crypto-js-d55471a7.js";import{E as I}from"./element-plus-58652eb8.js";import{c as L}from"./vue-i18n-63343f04.js";import"./lodash-es-f5bdeb48.js";import"./async-validator-dee29e8b.js";import"./@vueuse-1b6f7037.js";import"./@element-plus-7b906f9a.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./escape-html-cf2a8097.js";import"./normalize-wheel-es-ed76fb12.js";import"./@intlify-9ddbe450.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();let w="password-x/";async function O(e){return new Promise((t,a)=>{const s=new M({SecretId:e.keyId,SecretKey:e.keySecret});s.getBucket({Bucket:e.bucket,Region:e.region,Prefix:"password-x/",MaxKeys:1},function(r,o){r?a(r):t(s)})})}function R(e,t){return new Promise((a,s)=>{i.state.database.putObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e,Body:JSON.stringify(t)},function(r,o){r?s(r):a(o)})})}function N(e){return new Promise((t,a)=>{i.state.database.getObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e},function(s,r){r?t(JSON.parse(r.Body)):s&&s.statusCode!==404?a(s):t({})})})}function B(e){return new Promise((t,a)=>{i.state.database.deleteObject({Bucket:i.state.databaseForm.bucket,Region:i.state.databaseForm.region,Key:w+e},function(s,r){s?a(s):t(r)})})}const K=Object.freeze(Object.defineProperty({__proto__:null,delFile:B,getFile:N,login:O,putFile:R},Symbol.toStringTag,{value:"Module"}));let y="password-x/";async function U(e){return new Promise((t,a)=>{const s=new P({accessKeyId:e.keyId,accessKeySecret:e.keySecret,region:e.region,bucket:e.bucket});s.list({"max-keys":1}).then(()=>{t(s)}).catch(r=>{a(r)})})}function G(e,t){let a={"x-oss-storage-class":"Standard","x-oss-object-acl":"private","x-oss-forbid-overwrite":"true"};return new Promise((s,r)=>{let o=new P.Buffer(JSON.stringify(t));i.state.database.put(y+e,o,a).then(n=>{s(n)}).catch(n=>{r(n)})})}function V(e){return new Promise((t,a)=>{i.state.database.get(y+e).then(s=>{t(JSON.parse(s.content))}).catch(s=>{s.status===404?t({}):a(s)})})}function $(e){return i.state.database.delete(y+e)}const j=Object.freeze(Object.defineProperty({__proto__:null,delFile:$,getFile:V,login:U,putFile:G},Symbol.toStringTag,{value:"Module"})),u={cos:K,oss:j};async function H(e){return new Promise((t,a)=>{u[e.type].login(e).then(s=>{i.commit("setDatabase",s),i.commit("setDatabaseForm",e),t(s)}).catch(s=>{a(s)})})}function ve(e,t){let a=i.state.databaseForm.type;return u[a].putFile(e,t)}function Te(e){let t=i.state.databaseForm.type;return u[t].getFile(e)}function ke(e){let t=i.state.databaseForm.type;return u[t].delFile(e)}function J(){let e=window.screen.height,t=window.screen.width,a=navigator.language,s=screen.pixelDepth,o=document.createElement("canvas").getContext("experimental-webgl"),n=o.getExtension("WEBGL_debug_renderer_info"),l=o.getParameter(n.UNMASKED_RENDERER_WEBGL),p="",m=navigator.userAgentData;if(m){let c=m.brands;if(c)for(let g=0;g<c.length;g++)p+=c[g].brand}return f(e+t+a+s+l+p)}function _e(e,t){try{const a=d.enc.Utf8.parse(t),s=d.enc.Utf8.parse(f(e)),r=d.enc.Utf8.parse("");return d.AES.encrypt(a,s,{iv:r,mode:d.mode.CBC,padding:d.pad.Pkcs7}).ciphertext.toString()}catch{return null}}function z(e,t){try{let a=d.enc.Hex.parse(t),s=d.enc.Base64.stringify(a);const r=d.enc.Utf8.parse(f(e)),o=d.enc.Utf8.parse("");return d.AES.decrypt(s,r,{iv:o,mode:d.mode.CBC,padding:d.pad.Pkcs7}).toString(d.enc.Utf8).toString()}catch{return null}}async function Ee(e){let t=document.createElement("textarea");t.setAttribute("readonly","readonly"),t.value=e,document.body.appendChild(t),t.setSelectionRange(0,t.value.length),t.select(),document.execCommand("copy"),document.body.removeChild(t),I.success("复制成功")}function x(e){i.commit("updateSetting",e),localStorage.setItem("systemConfig",JSON.stringify(e))}function Ae(e,t){let a=F();a[e]=t,x(a)}function F(){if(i.state.setting.sync)return i.state.setting;{let e=localStorage.getItem("systemConfig");if(e){let t=JSON.parse(e);return t.sync=!0,i.commit("updateSetting",t),t}else{let t=i.state.setting;t.sync=!0,x(t)}}}function q(e){return F()[e]}function De(e){return e&&/^.*:\/\/.*$/.test(e)}function Ce(e,t){let a="",s=0;for(let l=0;l<t;l++){let p=e[s].split(""),m=Math.floor(Math.random()*p.length);a+=p[m],s++,s>=e.length&&(s=0)}let r=a.split(""),o,n;for(let l=r.length;l>1;l--)n=Math.floor(Math.random()*l),o=r[l-1],r[l-1]=r[n],r[n]=o;return r.join("")}const i=C({state:{database:null,databaseForm:null,verifyCode:null,mainPasswordType:null,setting:{sync:!1,language:"zh-cn",cacheMainPassword:!0,autoGeneratePassword:!0,darkMode:!1,sortRule:"insertTimeDesc",showPasswordStrength:!1,cacheDatabaseForm:!0,showAddTime:!0,showUpTime:!1,verifyShowGesture:!0,showLabel:!0,defaultPasswordRule:{length:16,number:!0,lowercase:!0,uppercase:!0,symbol:!0}}},mutations:{setDatabase(e,t){e.database=t},delDatabase(e){e.database=null},setDatabaseForm(e,t){e.databaseForm=t},delDatabaseForm(e){e.databaseForm=null},setVerifyCode(e,t){e.verifyCode=t},delVerifyCode(e){e.verifyCode=null,e.mainPasswordType=null},setMainPasswordType(e,t){e.mainPasswordType=t},updateSetting(e,t){e.setting=t}},actions:{async isLogin(e){return await new Promise(t=>{if(e.state.database){t(!0);return}if(q("cacheDatabaseForm")===!1){t(!1);return}let s=localStorage.getItem("databaseForm");if(!s){t(!1);return}let r=z(J(),s);if(!r){t(!1);return}H(JSON.parse(r)).then(()=>{t(!0)}).catch(()=>{t(!1)})})}},modules:{}}),W="modulepreload",Y=function(e,t){return new URL(e,t).href},b={},S=function(t,a,s){if(!a||a.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(a.map(o=>{if(o=Y(o,s),o in b)return;b[o]=!0;const n=o.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(!!s)for(let c=r.length-1;c>=0;c--){const g=r[c];if(g.href===o&&(!n||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const m=document.createElement("link");if(m.rel=n?"stylesheet":W,n||(m.as="script",m.crossOrigin=""),m.href=o,document.head.appendChild(m),n)return new Promise((c,g)=>{m.addEventListener("load",c),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o})},Q=[{path:"/",name:"Index",component:()=>S(()=>import("./IndexPage-10be48d0.js"),["./IndexPage-10be48d0.js","./exceljs-6b62d6db.js","./ali-oss-21f5c855.js","./file-saver-38a5c18e.js","./moment-fbc5633a.js","./vue-i18n-63343f04.js","./@intlify-9ddbe450.js","./@vue-054857f9.js","./element-plus-58652eb8.js","./lodash-es-f5bdeb48.js","./async-validator-dee29e8b.js","./@vueuse-1b6f7037.js","./@element-plus-7b906f9a.js","./@ctrl-f8748455.js","./@popperjs-c75af06c.js","./escape-html-cf2a8097.js","./normalize-wheel-es-ed76fb12.js","./element-plus-1877211f.css","./js-md5-11f5a111.js","./crypto-js-d55471a7.js","./vue-router-e948df84.js","./backImg-a3b16eec.js","./vuex-90336bc0.js","./cos-js-sdk-v5-31c61e27.js","./IndexPage-ae952d7c.css"],import.meta.url)},{path:"/login",name:"Login",component:()=>S(()=>import("./LoginPage-b57bde44.js"),["./LoginPage-b57bde44.js","./element-plus-58652eb8.js","./@vue-054857f9.js","./lodash-es-f5bdeb48.js","./async-validator-dee29e8b.js","./@vueuse-1b6f7037.js","./@element-plus-7b906f9a.js","./@ctrl-f8748455.js","./@popperjs-c75af06c.js","./escape-html-cf2a8097.js","./ali-oss-21f5c855.js","./normalize-wheel-es-ed76fb12.js","./element-plus-1877211f.css","./backImg-a3b16eec.js","./vue-router-e948df84.js","./vue-i18n-63343f04.js","./@intlify-9ddbe450.js","./vuex-90336bc0.js","./cos-js-sdk-v5-31c61e27.js","./js-md5-11f5a111.js","./crypto-js-d55471a7.js","./LoginPage-fce97f24.css"],import.meta.url)}],v=A({history:D(),routes:Q});v.beforeEach((e,t,a)=>{if(e.path==="/login"){a();return}i.dispatch("isLogin").then(s=>{s?a():a({path:"/login"})}).catch(()=>{a({path:"/login"})})});const X={"index.title.passwordCount":"个保存的密码","password.name":"名称","password.address":"地址","password.userName":"用户名","password.password":"密码","password.label":"标签","password.remark":"备注","password.insertTime":"添加时间","password.updateTime":"修改时间","password.label.placeholder":"请选择","index.table.operation":"操作","index.table.share":"分享","index.title.addPassword":"创建密码","index.title.search":"搜索...","index.table.edit":"编辑","index.table.operation.affirmDelete":"确认删除吗？","index.table.operation.affirm":"确认","index.table.operation.cancel":"取消","index.table.operation.delete":"删除","index.table.delete.success":"删除成功","index.mainPassword.changeSuccess":"设置成功","index.table.lock":"已锁定","index.title.strength":"密码强度","index.title.strength.strong":"强","index.title.strength.medium":"中","index.title.strength.weak":"弱","index.title.importExport":"备份/恢复","index.title.importExport.download":"下载模板","index.title.importExport.import":"导入密码","index.title.importExport.export":"导出密码","index.title.logout":"退出登录","login.form.title":"对象存储配置","login.form.region.verify":"请输入region","login.form.accessKeyId.verify":"请输入accessKeyId","login.form.accessKeySecret.verify":"请输入accessKeySecret","login.form.bucket.verify":"请输入bucket","login.form.error.RequestError":"请检查：桶名称、跨域设置、region配置","login.form.error.InvalidAccessKeyId":"keyId错误","login.form.error.SignatureDoesNotMatch":"keySecret错误","login.form.error.AccessDenied":"用户没有访问存储桶权限","login.form.failMessage":"登录失败","login.form.successMessage":"登录成功","mainPasswordSetting.form.passwordsDiff":"两次输入的密码不一致","mainPasswordSetting.form.setMainPassword":"设置主密码","mainPasswordSetting.form.newMainPassword":"新密码","mainPasswordSetting.form.newMainPasswordAffirm":"确认新密码","mainPasswordSetting.form.save":"保存","mainPasswordSetting.forget.message":"请务必设置一个自己能记住的主密码，主密码一但忘记则无法找回，所有保存的密码也无法查看","mainPasswordSetting.gesture.first":"请绘制主密码","mainPasswordSetting.gesture.affirm":"请再次绘制确认","mainPasswordSetting.gesture.reset":"重新绘制","mainPasswordSetting.passwordType.common":"标准","mainPasswordSetting.passwordType.gesture":"手势","mainPasswordSetting.verify.showGesture":"验证密码时显示手势","mainPasswordSetting.verify.showGesture.enable":"显示","mainPasswordSetting.verify.showGesture.disabled":"不显示","mainPasswordVerify.form.title":"验证主密码","mainPasswordVerify.form.mainPassword":"请输入主密码","mainPasswordVerify.form.save":"继续","mainPasswordVerify.form.verify":"验证失败","passwordForm.form.name.verify":"请输入名称","passwordForm.form.addPassword":"添加密码","passwordForm.form.editPassword":"修改密码","passwordForm.generateForm.uppercase":"大写","passwordForm.generateForm.lowercase":"小写","passwordForm.generateForm.number":"数字","passwordForm.generateForm.symbol":"符号","passwordForm.generateForm.length":"长度","passwordForm.generateForm.randomPassword":"生成","passwordForm.generateForm.remark":"备注...","passwordForm.generateForm.save":"保存","passwordForm.generateForm.password.copy":"复制","systemSetting.title":"系统设置","systemSetting.language":"语言","systemSetting.cacheMainPassword":"自动验证主密码","systemSetting.cacheMainPassword.enable":"需要","systemSetting.cacheMainPassword.disabled":"不需要","systemSetting.close":"关闭","systemSetting.save":"保存","systemSetting.defaultPasswordRule":"默认密码生成规则","systemSetting.logout":"退出登录","systemSetting.deleteAccount":"注销账户","systemSetting.deleteAccount.text":"账户注销将删除所有保存的密码且不可恢复，如确认注销请输入主密码验证身份","systemSetting.deleteAccount.affirm":"确认注销","systemSetting.deleteAccount.success":"注销成功","systemSetting.deleteAccount.mainPasswordError":"主密码验证失败","systemSetting.updateMainPassword":"修改主密码","systemSetting.passwordRuleVerify":"必须选择一种密码字符类型","systemSetting.topic":"主题","systemSetting.topic.light":"明亮","systemSetting.topic.dark":"暗黑","systemSetting.sort":"排序规则","systemSetting.sort.insertTimeAsc":"添加时间正序","systemSetting.sort.insertTimeDesc":"添加时间倒叙","systemSetting.sort.updateTimeAsc":"修改时间正序","systemSetting.sort.updateTimeDesc":"修改时间倒叙","systemSetting.sort.nameAsc":"名称正序","systemSetting.sort.nameDesc":"名称倒叙","systemSetting.sort.strengthAsc":"强度正序","systemSetting.sort.strengthDesc":"强度倒叙","systemSetting.showPasswordStrength":"密码强度提示","systemSetting.showPasswordStrength.enable":"显示密码强度","systemSetting.showPasswordStrength.disabled":"不显示密码强度","systemSetting.cacheDatabaseForm":"自动登录","systemSetting.cacheDatabaseForm.enable":"需要","systemSetting.cacheDatabaseForm.disabled":"不需要","systemSetting.showAddTime":"显示添加时间","systemSetting.showAddTime.enable":"需要","systemSetting.showAddTime.disabled":"不需要","systemSetting.showUpTime":"显示更新时间","systemSetting.showUpTime.enable":"需要","systemSetting.showUpTime.disabled":"不需要","systemSetting.showLabel":"显示标签","systemSetting.showLabel.enable":"需要","systemSetting.showLabel.disabled":"不需要","systemSetting.takeEffect":"部分设置需刷新页面后生效","passwordForm.autoGeneratePassword":"添加时自动生成密码","passwordForm.autoGeneratePassword.enable":"需要","passwordForm.autoGeneratePassword.disabled":"不需要","index.title.unlock":"解锁","index.title.lock":"锁定","index.title.setting":"系统设置","index.table.empty":"没有可显示的密码","index.table.label":"标签","mainPasswordSetting.form.mainPasswordError":"主密码验证失败","labelTree.addLabel":"添加标签","labelTree.firstAddLabel":"添加标签","labelTree.title":"标签","labelTree.search.placeholder":"搜索","labelTree.tree.add":"添加","labelTree.tree.remove":"删除","importExport.data.empty":"请按照下载的模板补充密码数据后再导入","importExport.exportName":"密码导出","importExport.importTemplateName":"密码导入模板"},Z={"index.title.passwordCount":"saved password","password.name":"name","password.address":"address","password.userName":"username","password.password":"password","password.remark":"remark","password.label":"label","password.insertTime":"add time","password.updateTime":"update time","password.label.placeholder":"Select","index.table.operation":"operations","index.table.share":"share","index.title.addPassword":"create password","index.title.search":"Search...","index.table.edit":"edit","index.table.operation.affirmDelete":"affirm delete?","index.table.operation.affirm":"affirm","index.table.operation.cancel":"cancel","index.table.operation.delete":"delete","index.table.delete.success":"delete success","index.mainPassword.changeSuccess":"setting success","index.table.lock":"Locked","index.title.strength":"password strength","index.title.strength.strong":"Strong","index.title.strength.medium":"medium","index.title.strength.weak":"weak","index.title.importExport":"backup/recover","index.title.importExport.download":"download template","index.title.importExport.import":"import password","index.title.importExport.export":"export password","index.title.logout":"logout","login.form.title":"object storage config","login.form.region.verify":"please input region","login.form.accessKeyId.verify":"please input accessKeyId","login.form.accessKeySecret.verify":"please input accessKeySecret","login.form.bucket.verify":"please input bucket","login.form.error.RequestError":"please check：bucket name、crop setting、region config","login.form.error.InvalidAccessKeyId":"keyId error","login.form.error.SignatureDoesNotMatch":"keySecret error","login.form.error.AccessDenied":"user not have permission to access bucket","login.form.failMessage":"login fail","login.form.successMessage":"login success","mainPasswordSetting.form.passwordsDiff":"The two passwords are different","mainPasswordSetting.form.setMainPassword":"set main password","mainPasswordSetting.form.newMainPassword":"new main password","mainPasswordSetting.form.newMainPasswordAffirm":"new main password affirm","mainPasswordSetting.form.save":"save","mainPasswordSetting.gesture.first":"Please draw the master password","mainPasswordSetting.gesture.affirm":"Please draw again to confirm","mainPasswordSetting.gesture.reset":"repaint","mainPasswordSetting.passwordType.common":"common","mainPasswordSetting.passwordType.gesture":"gesture","mainPasswordSetting.forget.message":"Please be sure to set a master password that you can remember. Once the master password is forgotten, it cannot be retrieved, and all saved passwords cannot be viewed","mainPasswordSetting.verify.showGesture":"show gesture for verify","mainPasswordSetting.verify.showGesture.enable":"show","mainPasswordSetting.verify.showGesture.disabled":"hidden","mainPasswordVerify.form.title":"verify main password","mainPasswordVerify.form.mainPassword":"please input main password","mainPasswordVerify.form.save":"continue","mainPasswordVerify.form.verify":"verify fail","passwordForm.form.name.verify":"please input name","passwordForm.form.addPassword":"new password","passwordForm.form.editPassword":"edit password","passwordForm.generateForm.uppercase":"uppercase","passwordForm.generateForm.lowercase":"lowercase","passwordForm.generateForm.number":"number","passwordForm.generateForm.symbol":"symbol","passwordForm.generateForm.length":"length","passwordForm.generateForm.randomPassword":"generate","passwordForm.generateForm.remark":"Remark...","passwordForm.generateForm.save":"create","passwordForm.generateForm.password.copy":"copy","systemSetting.title":"system setting","systemSetting.language":"language","systemSetting.cacheMainPassword":"auto verify main password","systemSetting.cacheMainPassword.enable":"on","systemSetting.cacheMainPassword.disabled":"off","systemSetting.close":"close","systemSetting.save":"save","systemSetting.defaultPasswordRule":"default password rule","systemSetting.logout":"logout","systemSetting.deleteAccount":"delete account","systemSetting.deleteAccount.text":"Account logout will delete all saved passwords and cannot be recovered. If you confirm logout, please enter the master password to verify your identity","systemSetting.deleteAccount.affirm":"delete account","systemSetting.deleteAccount.success":"delete account success","systemSetting.deleteAccount.mainPasswordError":"main password verify error","systemSetting.updateMainPassword":"update main password","systemSetting.passwordRuleVerify":"You must select a password character type","systemSetting.topic":"topic","systemSetting.topic.light":"light","systemSetting.topic.dark":"dark","systemSetting.sort":"sort by","systemSetting.sort.insertTimeAsc":"add time","systemSetting.sort.insertTimeDesc":"add time desc","systemSetting.sort.updateTimeAsc":"update time","systemSetting.sort.updateTimeDesc":"update time desc","systemSetting.sort.nameAsc":"name","systemSetting.sort.nameDesc":"name desc","systemSetting.sort.strengthAsc":"strength","systemSetting.sort.strengthDesc":"strength desc","systemSetting.showPasswordStrength":"password strength reminder","systemSetting.showPasswordStrength.enable":"on","systemSetting.showPasswordStrength.disabled":"off","systemSetting.cacheDatabaseForm":"cache database form","systemSetting.cacheDatabaseForm.enable":"on","systemSetting.cacheDatabaseForm.disabled":"off","systemSetting.showAddTime":"show add time","systemSetting.showAddTime.enable":"on","systemSetting.showAddTime.disabled":"off","systemSetting.showUpTime":"show update time","systemSetting.showUpTime.enable":"on","systemSetting.showUpTime.disabled":"off","systemSetting.showLabel":"show label","systemSetting.showLabel.enable":"on","systemSetting.showLabel.disabled":"off","systemSetting.takeEffect":"Some Settings take effect after you refresh the page","passwordForm.autoGeneratePassword":"automatically generated a password","passwordForm.autoGeneratePassword.enable":"on","passwordForm.autoGeneratePassword.disabled":"off","index.title.unlock":"unlock","index.title.lock":"lock","index.title.setting":"system setting","index.table.empty":"There is no password to display","index.table.label":"label","mainPasswordSetting.form.mainPasswordError":"main password verify error","labelTree.addLabel":"add label","labelTree.firstAddLabel":"add label","labelTree.title":"label","labelTree.search.placeholder":"Search","labelTree.tree.add":"add","labelTree.tree.remove":"delete","importExport.data.empty":"Add the password data according to the downloaded template and then import the password","importExport.exportName":"password export","importExport.importTemplateName":"password import template"},ee="zh-cn",te=L({legacy:!1,locale:ee,messages:{"zh-cn":X,"en-us":Z}});const se=(e,t)=>{const a=e.__vccOpts||e;for(const[s,r]of t)a[s]=r;return a},re={};function ae(e,t){const a=T("router-view");return k(),_(a)}const oe=se(re,[["render",ae],["__scopeId","data-v-45e236d6"]]);let h=E(oe);h.use(v);h.use(te);h.mount("#app");export{se as _,ke as a,q as b,Ee as c,z as d,_e as e,Te as f,J as g,H as h,De as i,Ae as j,F as l,ve as p,Ce as r,i as s,x as u};
