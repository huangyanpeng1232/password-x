import{E as Me}from"./exceljs-6b62d6db.js";import{F as ze}from"./file-saver-38a5c18e.js";import{h as ge}from"./moment-fbc5633a.js";import{u as ae}from"./vue-i18n-3214f365.js";import{E as q,a as Ye,b as ue,c as me,d as he,e as yt,f as ht,g as Pe,h as We,i as Fe,j as Re,k as xe,l as je,m as De,n as Pt,o as xt,p as Ue,q as kt,r as Ct,s as Ge,t as St,u as Vt,v as Tt,w as Mt,x as Et,y as Ft,z as Rt,A as Dt,B as Ut,C as It,D as Nt}from"./element-plus-6342e0a0.js";import{r as S,o as C,c as O,X as G,b as He,u as e,O as Y,I as z,ac as ke,J as l,a as B,S as t,P as k,Q as x,A as de,R as Z,aj as re,ak as Je,w as Le,aq as At,ar as zt}from"./@vue-8e6a53e5.js";import{m as Lt}from"./js-md5-11f5a111.js";import{h as Oe}from"./@vueuse-9ffc2ac5.js";import{d as ie,s as Q,g as ve,a as $e,e as _e,_ as Ke,p as Xe,b as Ze}from"./index-fe1934d8.js";import{u as $t}from"./vue-router-c2e97886.js";import{l as qe,u as Bt,g as be,c as Ee,r as Yt,i as Wt}from"./global-92074fcc.js";import{m as jt,u as Gt,n as Be,o as Ht,v as Jt,h as Ot,r as Kt}from"./@element-plus-169d18e8.js";import"./ali-oss-21f5c855.js";import"./@intlify-6e8dbf92.js";import"./lodash-es-f5bdeb48.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./escape-html-cf2a8097.js";import"./normalize-wheel-es-ed76fb12.js";import"./crypto-js-d55471a7.js";import"./vuex-7c7bb3a2.js";import"./cos-js-sdk-v5-31c61e27.js";const Xt={__name:"ImportExport",emits:["importComplete"],setup(X,{expose:_,emit:W}){const{t:w}=ae(),M=W,p=S(),v=S(),i=S(0),V=a=>{p.value.click(),v.value=a},P=async()=>{if(p.value.files===0)return;i.value=Date.now();const a=new Me.Workbook;a.xlsx.load(p.value.files[0]).then(()=>{a.eachSheet(function(o){if(o.rowCount<2){q.error(w("importExport.data.empty")),p.value.value="";return}let n=[];for(let u=2;u<=o.rowCount;u++){let c=o.getRow(u),T=s(c.getCell(1).value),D=s(c.getCell(2).value),r=s(c.getCell(3).value),g=s(c.getCell(4).value),F=s(c.getCell(5).value),E=s(c.getCell(6).value),H=s(c.getCell(7).value),J=s(c.getCell(8).value);T&&n.push({id:i.value++,name:T,address:D,userName:r,password:g,remark:E,label:f(F),insertTime:H,updateTime:J})}M("importComplete",n,v.value),p.value.value=""})}).catch(o=>{q.error(o),p.value.value=""})},s=a=>a?typeof a=="object"?a instanceof Date?ge(a).format("YYYY-MM-DD HH:mm:ss"):a.text:a.toString():"",f=a=>{if(!a)return"";let o=[],n=a.split("、");for(let u=0;u<n.length;u++){let c=b(v.value,n[u],"");if(c)o.push(c);else{let T=[];L(v.value,n[u].split(">"),0,T);for(let D=0;D<T.length;D++)o.push(T[D])}}return Array.from(new Set(o))},b=(a,o,n)=>{for(let u=0;u<a.length;u++){let c=n?n+">"+a[u].label:a[u].label;if(o===c)return a[u].id;if(a[u].children&&a[u].children.length>0)return b(a[u].children,o,c)}},L=(a,o,n,u)=>{if(!o[n])return;for(let T=0;T<a.length;T++)if(a[T].label===o[n])return o[n+1]||u.push(a[T].id),L(a[T].children,o,n+1,u);let c={id:i.value++,label:o[n],children:[]};a.push(c),o[n+1]||u.push(c.id),L(c.children,o,n+1,u)},U=async(a,o)=>{v.value=o;const n=new Me.Workbook,u=n.addWorksheet("sheet1");u.getCell("A1").value=w("password.name"),u.getCell("B1").value=w("password.address"),u.getCell("C1").value=w("password.userName"),u.getCell("D1").value=w("password.password"),u.getCell("E1").value=w("password.label"),u.getCell("F1").value=w("password.remark"),u.getCell("G1").value=w("password.insertTime"),u.getCell("H1").value=w("password.updateTime");for(let c=0;c<a.length;c++){let T=a[c].insertTime;T||(T=ge().format("YYYY-MM-DD HH:mm:ss")),u.getCell("A"+(c+2)).value=a[c].name,u.getCell("B"+(c+2)).value=a[c].address,u.getCell("C"+(c+2)).value=a[c].userName,u.getCell("D"+(c+2)).value=a[c].password,u.getCell("E"+(c+2)).value=y(a[c].label),u.getCell("F"+(c+2)).value=a[c].remark,u.getCell("G"+(c+2)).value=T,u.getCell("H"+(c+2)).value=a[c].updateTime}n.xlsx.writeBuffer().then(c=>{let T=new Blob([c],{type:"application/octet-stream"});ze.saveAs(T,w("importExport.exportName")+"_"+ge().format("YYYY-MM-DD HH:mm:ss")+".xlsx")})},y=a=>{if(!a)return"";let o=[];return N(v.value,a,o,""),o.join("、")},N=(a,o,n,u)=>{for(let c=0;c<a.length;c++){let T=u?u+">"+a[c].label:a[c].label;o.includes(a[c].id)&&n.push(T),a[c].children&&a[c].children.length>0&&N(a[c].children,o,n,T)}};return _({importExcel:V,exportExcel:U,downloadExcelTemplate:()=>{const a=new Me.Workbook,o=a.addWorksheet("sheet1");o.getCell("A1").value=w("password.name"),o.getCell("B1").value=w("password.address"),o.getCell("C1").value=w("password.userName"),o.getCell("D1").value=w("password.password"),o.getCell("E1").value=w("password.label"),o.getCell("F1").value=w("password.remark"),o.getCell("G1").value=w("password.insertTime"),o.getCell("H1").value=w("password.updateTime"),a.xlsx.writeBuffer().then(n=>{let u=new Blob([n],{type:"application/octet-stream"});ze.saveAs(u,w("importExport.importTemplateName")+".xlsx")})}}),(a,o)=>(C(),O("input",{type:"file",onChange:P,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ref_key:"fileUploadInput",ref:p,style:{display:"none"}},null,544))}},Zt=["width","height"],Ie={__name:"GesturePassword",props:{size:{type:Number,default:300},count:{type:Number,default:3}},emits:["complete"],setup(X,{expose:_,emit:W}){const w=Oe(),M=W,p=S();let v=X;const i=G({padding:v.size*.18,background:w.value?"rgb(20,20,20)":"#fff",failColor:"#F56C6C",passColor:"#67C23A",point:{color:"#409EFF",size:v.size*.023,selected:{range:v.size*.07,color:"#409EFF",size:v.size*.023,madding:{color:"#409EFF",size:v.size*.07,lineWidth:1}}},line:{color:"#409EFF",width:2}}),V=S({}),P=S([]),s=S(!1),f=S("");let b=null;const L=()=>{i.background=w.value?"rgb(20,20,20)":"#fff",b=p.value.getContext("2d"),U()},U=()=>{b.fillStyle=i.background,b.fillRect(0,0,v.size,v.size),V.value=[];let r=(v.size-i.padding*2)/(v.count-1),g=1;for(let F=0;F<v.count;F++)for(let E=0;E<v.count;E++){let H=i.padding+E*r,J=i.padding+F*r,R=r/2,K={id:g,x:H,y:J,startX:H-R,endX:H+R,startY:J-R,endY:J+R,h:r,w:r};y(K),V.value[g]=K,g++}},y=r=>{let g=c(r);g&&(b.beginPath(),f.value==="fail"?b.strokeStyle=i.failColor:f.value==="pass"?b.strokeStyle=i.passColor:b.strokeStyle=i.point.selected.madding.color,b.lineWidth=i.point.selected.madding.lineWidth,b.arc(r.x,r.y,i.point.selected.madding.size,0,Math.PI*2),b.stroke()),b.beginPath(),g?(f.value==="fail"?b.fillStyle=i.failColor:f.value==="pass"?b.fillStyle=i.passColor:b.fillStyle=i.point.selected.madding.color,b.arc(r.x,r.y,i.point.selected.size,0,Math.PI*2)):(b.fillStyle=i.point.color,b.arc(r.x,r.y,i.point.size,0,Math.PI*2)),b.fill()},N=()=>{s.value=!0},I=()=>{if(!s.value)return;s.value=!1;let r=o();if(r){let g=Lt(r);M("complete",g)}U(),u()},a=r=>{f.value=r,U(),u(),r?setTimeout(()=>{f.value="",P.value=[],U()},500):(P.value=[],U())},o=()=>{let r="";for(let g=0;g<P.value.length;g++)r+=P.value[g].id+",";return r&&(r=r.substring(0,r.length-1)),r},n=r=>{let g=r.offsetX,F=r.offsetY;if(U(),u(g,F),!s.value)return;let E=T(g,F);!E||c(E)||(P.value.push(E),U(),u(g,F))},u=(r,g)=>{let F=T(r,g);if(F&&f.value===""&&(b.beginPath(),b.strokeStyle=i.point.selected.madding.color,b.lineWidth=i.point.selected.madding.lineWidth,b.arc(F.x,F.y,i.point.selected.madding.size,0,Math.PI*2),b.stroke()),P.value.length!==0){b.beginPath(),f.value==="fail"?b.strokeStyle=i.failColor:f.value==="pass"?b.strokeStyle=i.passColor:b.strokeStyle=i.line.color,b.lineWidth=i.line.width,b.lineCap="round",b.moveTo(P.value[0].x,P.value[0].y);for(let E=1;E<P.value.length;E++)b.lineTo(P.value[E].x,P.value[E].y);s.value&&r&&g&&f.value===""&&b.lineTo(r,g),b.stroke()}},c=r=>{for(let g=0;g<P.value.length;g++)if(r.id===P.value[g].id)return!0;return!1},T=(r,g)=>{for(let F in V.value){let E=V.value[F];if(r>E.startX+i.point.selected.range&&r<E.endX-i.point.selected.range&&g>E.startY+i.point.selected.range&&g<E.endY-i.point.selected.range)return E}},D=r=>{let g=r.touches[0].clientX-p.value.offsetLeft,F=r.touches[0].clientY-p.value.offsetTop;n({offsetX:g,offsetY:F})};return He(()=>{L()}),_({setVerifyStatus:a}),(r,g)=>e(v).size?(C(),O("canvas",{key:0,width:e(v).size,height:e(v).size,ref_key:"canvasRef",ref:p,onMousedown:N,onMouseup:I,onMousemove:g[0]||(g[0]=F=>n(F)),onMouseleave:I,onTouchstart:N,onTouchend:I,onTouchmove:D},null,40,Zt)):Y("",!0)}},qt={style:{"text-align":"center"}},Qt={class:"dialog-footer"},el={__name:"DeleteAccount",emits:["deleteAccount"],setup(X,{expose:_,emit:W}){const{t:w}=ae(),M=W,p=S(),v=G({deleteAccount:!1}),i=S(""),V=S(""),P=()=>{let L=ie(V.value,Q.state.verifyCode);if(L&&L==="password-x"){i.value==="gesture"&&p.value.setVerifyStatus("pass");let U=localStorage.getItem("databaseForm"),y=ie(ve(),U);if(JSON.parse(y).keyId==="LTAI5tRPBc5sY6KbZd1Vc1jU"){q.error("演示账号不能注销");return}$e("password.json"),$e("labelTree.json"),localStorage.removeItem("systemConfig"),q.success(w("systemSetting.deleteAccount.success")),M("deleteAccount")}else i.value==="common"?q.error(w("systemSetting.deleteAccount.mainPasswordError")):p.value.setVerifyStatus("fail")},s=()=>{i.value=Q.state.mainPasswordType,v.deleteAccount=!0},f=L=>{V.value=L,P()},b=S(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){b.value=document.documentElement.clientWidth<728}),_({showDeleteAccount:s}),(L,U)=>{const y=Ye,N=Ie,I=ue,a=me,o=he;return C(),z(o,{fullscreen:e(b),modelValue:e(v).deleteAccount,"onUpdate:modelValue":U[1]||(U[1]=n=>e(v).deleteAccount=n),title:e(w)("systemSetting.deleteAccount"),width:"400px"},ke({default:l(()=>[t(y,{type:"error",closable:!1},{default:l(()=>[k(x(e(w)("systemSetting.deleteAccount.text")),1)]),_:1}),B("div",qt,[e(i)==="gesture"?(C(),z(N,{key:0,ref_key:"gesturePasswordRef",ref:p,onComplete:f},null,512)):Y("",!0),e(i)==="common"?(C(),z(I,{key:1,modelValue:e(V),"onUpdate:modelValue":U[0]||(U[0]=n=>de(V)?V.value=n:null),style:{"margin-top":"20px"}},null,8,["modelValue"])):Y("",!0)])]),_:2},[e(i)==="common"?{name:"footer",fn:l(()=>[B("span",Qt,[t(a,{type:"danger",onClick:P},{default:l(()=>[k(x(e(w)("systemSetting.deleteAccount.affirm")),1)]),_:1})])]),key:"0"}:void 0]),1032,["fullscreen","modelValue","title"])}}},tl={class:"dialog-footer"},ll={__name:"SystemSetting",emits:["updateMainPassword","deleteAccount","systemChangeChange"],setup(X,{expose:_,emit:W}){const w=$t(),M=Oe(),{t:p,locale:v}=ae(),i=W,V=S(),P=G({setting:!1}),s=G({language:"zh-cn",cacheMainPassword:!0,autoGeneratePassword:!0,darkMode:!1,sortRule:"insertTimeDesc",showPasswordStrength:!1,defaultPasswordRule:{length:16,number:!0,lowercase:!0,uppercase:!0,symbol:!0}}),f=G([{key:"zh-cn",label:"简体中文"},{key:"en-us",label:"English"}]),b=G([{key:"insertTimeDesc",label:p("systemSetting.sort.insertTimeDesc")},{key:"insertTimeAsc",label:p("systemSetting.sort.insertTimeAsc")},{key:"name",label:p("systemSetting.sort.name")}]),L=G([{key:!1,label:p("systemSetting.topic.light")},{key:!0,label:p("systemSetting.topic.dark")}]),U=G([{key:!0,label:p("systemSetting.cacheMainPassword.enable")},{key:!1,label:p("systemSetting.cacheMainPassword.disabled")}]),y=G([{key:!0,label:p("passwordForm.autoGeneratePassword.enable")},{key:!1,label:p("passwordForm.autoGeneratePassword.disabled")}]),N=G([{key:!0,label:p("systemSetting.showPasswordStrength.enable")},{key:!1,label:p("systemSetting.showPasswordStrength.disabled")}]);let I=null;const a=()=>{let D=qe();if(D)for(let r in D)s[r]=D[r];s.language!==v.value&&(s.language=v.value),I=JSON.stringify(s),P.setting=!0},o=()=>{let D=s.defaultPasswordRule;if(!D.number&&!D.symbol&&!D.lowercase&&!D.uppercase){q.error(p("systemSetting.passwordRuleVerify"));return}Bt(s),s.cacheMainPassword===!1&&localStorage.removeItem("mainPasswordCiphertext");let r=JSON.parse(I);s.language!==v.value&&(v.value=s.language,console.log("系统语言设置为：",s.language)),M.value!==s.darkMode&&(M.value=s.darkMode,console.log("暗黑模式设置为：",s.darkMode)),s.sortRule!==r.sortRule&&(i("systemChangeChange","sortChange",s.sortRule),console.log("排序规则设置为：",s.sortRule)),s.showPasswordStrength!==r.showPasswordStrength&&(i("systemChangeChange","showPasswordStrength",s.showPasswordStrength),console.log("是否显示密码强度设置为：",s.showPasswordStrength)),P.setting=!1},n=()=>{localStorage.removeItem("databaseForm"),localStorage.removeItem("mainPasswordCiphertext"),Q.commit("delDatabase"),Q.commit("delDatabaseForm"),w.push("/login")},u=()=>{P.setting=!1,i("updateMainPassword")},c=()=>{P.setting=!1,V.value.showDeleteAccount()},T=S(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){T.value=document.documentElement.clientWidth<728}),_({logout:n,openSystemSetting:a,showUpdateMainPassword:u}),(D,r)=>{const g=yt,F=ht,E=Pe,H=We,J=Fe,R=ue,K=Re,Se=xe,te=me,Ve=he,pe=el;return C(),O(Z,null,[t(Ve,{fullscreen:e(T),modelValue:e(P).setting,"onUpdate:modelValue":r[11]||(r[11]=h=>e(P).setting=h),title:e(p)("systemSetting.title"),width:"600px"},{footer:l(()=>[B("span",tl,[t(te,{type:"primary",onClick:o},{default:l(()=>[k(x(e(p)("systemSetting.save")),1)]),_:1})])]),default:l(()=>[t(Se,{model:e(s),"label-width":"150px"},{default:l(()=>[t(E,{label:e(p)("systemSetting.language")},{default:l(()=>[t(F,{modelValue:e(s).language,"onUpdate:modelValue":r[0]||(r[0]=h=>e(s).language=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(f),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("systemSetting.sort")},{default:l(()=>[t(F,{modelValue:e(s).sortRule,"onUpdate:modelValue":r[1]||(r[1]=h=>e(s).sortRule=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(b),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("systemSetting.topic")},{default:l(()=>[t(F,{modelValue:e(s).darkMode,"onUpdate:modelValue":r[2]||(r[2]=h=>e(s).darkMode=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(L),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("systemSetting.cacheMainPassword")},{default:l(()=>[t(F,{modelValue:e(s).cacheMainPassword,"onUpdate:modelValue":r[3]||(r[3]=h=>e(s).cacheMainPassword=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(U),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("passwordForm.autoGeneratePassword")},{default:l(()=>[t(F,{modelValue:e(s).autoGeneratePassword,"onUpdate:modelValue":r[4]||(r[4]=h=>e(s).autoGeneratePassword=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(y),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("systemSetting.showPasswordStrength")},{default:l(()=>[t(F,{modelValue:e(s).showPasswordStrength,"onUpdate:modelValue":r[5]||(r[5]=h=>e(s).showPasswordStrength=h)},{default:l(()=>[(C(!0),O(Z,null,re(e(N),h=>(C(),z(g,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(E,{label:e(p)("systemSetting.defaultPasswordRule")},{default:l(()=>[t(K,{style:{"margin-top":"15px"}},{default:l(()=>[t(J,{span:12},{default:l(()=>[t(H,{size:"small",modelValue:e(s).defaultPasswordRule.uppercase,"onUpdate:modelValue":r[6]||(r[6]=h=>e(s).defaultPasswordRule.uppercase=h),label:e(p)("passwordForm.generateForm.uppercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(J,{span:12},{default:l(()=>[t(H,{size:"small",modelValue:e(s).defaultPasswordRule.lowercase,"onUpdate:modelValue":r[7]||(r[7]=h=>e(s).defaultPasswordRule.lowercase=h),label:e(p)("passwordForm.generateForm.lowercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(J,{span:12},{default:l(()=>[t(H,{size:"small",modelValue:e(s).defaultPasswordRule.number,"onUpdate:modelValue":r[8]||(r[8]=h=>e(s).defaultPasswordRule.number=h),label:e(p)("passwordForm.generateForm.number"),border:""},null,8,["modelValue","label"])]),_:1}),t(J,{span:12},{default:l(()=>[t(H,{size:"small",modelValue:e(s).defaultPasswordRule.symbol,"onUpdate:modelValue":r[9]||(r[9]=h=>e(s).defaultPasswordRule.symbol=h),label:e(p)("passwordForm.generateForm.symbol"),border:""},null,8,["modelValue","label"])]),_:1}),t(J,{span:12},{default:l(()=>[B("div",null,[t(R,{size:"small",style:{position:"relative",top:"3px"},modelValue:e(s).defaultPasswordRule.length,"onUpdate:modelValue":r[10]||(r[10]=h=>e(s).defaultPasswordRule.length=h)},{prepend:l(()=>[k(x(e(p)("passwordForm.generateForm.length")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["model"]),t(te,{plain:"",onClick:u},{default:l(()=>[k(x(e(p)("systemSetting.updateMainPassword")),1)]),_:1}),t(te,{plain:"",type:"danger",onClick:c},{default:l(()=>[k(x(e(p)("systemSetting.deleteAccount")),1)]),_:1}),t(te,{type:"warning",plain:"",onClick:n},{default:l(()=>[k(x(e(p)("systemSetting.logout")),1)]),_:1})]),_:1},8,["fullscreen","modelValue","title"]),t(pe,{ref_key:"deleteAccountRef",ref:V,onDeleteAccount:n},null,512)],64)}}},al={style:{"text-align":"center"}},sl={class:"dialog-footer"},Qe={__name:"MainPasswordVerify",emits:["verifyPass"],setup(X,{expose:_,emit:W}){const{t:w}=ae(),M=W,p=S(),v=S(""),i=S(""),V=G({verifyMainPassword:!1}),P=N=>{v.value=N,s()},s=()=>{let N=ie(v.value,Q.state.verifyCode);N&&N==="password-x"?(i.value==="gesture"&&p.value.setVerifyStatus("pass"),M("verifyPass",v.value),b(v.value),v.value="",V.verifyMainPassword=!1):i.value==="common"?q.error(w("mainPasswordVerify.form.verify")):p.value.setVerifyStatus("fail")},f=()=>{localStorage.removeItem("mainPasswordCiphertext")},b=N=>{if(be("cacheMainPassword")===!1)return;let a=ve(),o=_e(a,N);localStorage.setItem("mainPasswordCiphertext",o)},L=()=>{if(be("cacheMainPassword")===!1)return null;let I=localStorage.getItem("mainPasswordCiphertext");if(!I)return null;let a=ve(),o=ie(a,I);return o||null},U=(N=!0)=>{if(i.value=Q.state.mainPasswordType,!N){V.verifyMainPassword=!0;return}let I=L();if(!I){V.verifyMainPassword=!0;return}let a=ie(I,Q.state.verifyCode);a&&a==="password-x"?M("verifyPass",I):V.verifyMainPassword=!0},y=S(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){y.value=document.documentElement.clientWidth<728}),_({verifyMainPassword:U,delLocalMainPassword:f}),(N,I)=>{const a=Ie,o=ue,n=Pe,u=xe,c=me,T=he;return C(),z(T,{fullscreen:e(y),modelValue:e(V).verifyMainPassword,"onUpdate:modelValue":I[1]||(I[1]=D=>e(V).verifyMainPassword=D),title:e(w)("mainPasswordVerify.form.title"),width:"400px"},ke({default:l(()=>[B("div",al,[e(i)==="gesture"?(C(),z(a,{key:0,ref_key:"gesturePasswordRef",ref:p,onComplete:P},null,512)):Y("",!0),e(i)==="common"?(C(),z(u,{key:1,style:{padding:"10px"}},{default:l(()=>[t(n,null,{default:l(()=>[t(o,{modelValue:e(v),"onUpdate:modelValue":I[0]||(I[0]=D=>de(v)?v.value=D:null),placeholder:e(w)("mainPasswordVerify.form.mainPassword"),type:"password",onKeyup:Je(s,["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1})]),_:1})):Y("",!0)])]),_:2},[e(i)==="common"?{name:"footer",fn:l(()=>[B("span",sl,[t(c,{type:"primary",disabled:!e(v),onClick:s},{default:l(()=>[k(x(e(w)("mainPasswordVerify.form.save")),1)]),_:1},8,["disabled"])])]),key:"0"}:void 0]),1032,["fullscreen","modelValue","title"])}}},ol={class:"dialog-footer"},nl={__name:"MainPasswordSetting",emits:["mainPasswordChange"],setup(X,{expose:_,emit:W}){const{t:w}=ae(),M=W,p=S(),v=S(),i=S("gesture"),V=S(""),P=S(""),s=G({mainPassword:!1}),f=S(""),b=a=>{f.value==="setting"?(V.value=a,f.value="affirm",v.value.setVerifyStatus("")):f.value==="affirm"&&(P.value=a,L())},L=()=>{if(V.value!==P.value){q.error(w("mainPasswordSetting.form.passwordsDiff"));return}let a=localStorage.getItem("databaseForm"),o=ie(ve(),a);if(JSON.parse(o).accessKeyId==="LTAI5tRPBc5sY6KbZd1Vc1jU"){q.error("演示账号不能修改主密码");return}i.value==="gesture"?Q.commit("setMainPasswordType","gesture"):Q.commit("setMainPasswordType","common"),M("mainPasswordChange",V.value,i.value);let u=be("cacheMainPassword");if(u||u==null){let c=ve(),T=_e(c,V.value);localStorage.setItem("mainPasswordCiphertext",T)}V.value="",P.value="",s.mainPassword=!1},U=()=>{f.value="setting",s.mainPassword=!0},y=()=>{p.value.verifyMainPassword(!1)},N=()=>{i.value==="gesture"&&(f.value="setting"),V.value="",P.value=""},I=S(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){I.value=document.documentElement.clientWidth<728}),_({settingMainPassword:U,updateMainPassword:y}),(a,o)=>{const n=Ye,u=je,c=Ie,T=De,D=Pt,r=ue,g=Pe,F=xe,E=xt,H=me,J=he,R=Qe;return C(),O(Z,null,[t(J,{fullscreen:e(I),modelValue:e(s).mainPassword,"onUpdate:modelValue":o[4]||(o[4]=K=>e(s).mainPassword=K),title:e(w)("mainPasswordSetting.form.setMainPassword"),width:"470px"},ke({default:l(()=>[t(n,{type:"error",style:{position:"relative",top:"-10px"},closable:!1},{default:l(()=>[k(x(e(w)("mainPasswordSetting.forget.message")),1)]),_:1}),t(E,{modelValue:e(i),"onUpdate:modelValue":o[3]||(o[3]=K=>de(i)?i.value=K:null),style:{"margin-top":"10px"},type:"card",onTabChange:N},{default:l(()=>[t(D,{label:e(w)("mainPasswordSetting.passwordType.gesture"),name:"gesture",style:{"text-align":"center"}},{default:l(()=>[B("div",null,[e(f)==="setting"?(C(),z(u,{key:0},{default:l(()=>[k(x(e(w)("mainPasswordSetting.gesture.first")),1)]),_:1})):Y("",!0),e(f)==="affirm"?(C(),z(u,{key:1},{default:l(()=>[k(x(e(w)("mainPasswordSetting.gesture.affirm")),1)]),_:1})):Y("",!0)]),e(s).mainPassword&&e(i)==="gesture"?(C(),z(c,{key:0,ref_key:"gesturePasswordRef",ref:v,onComplete:b},null,512)):Y("",!0),B("div",null,[t(T,{underline:!1,style:{position:"relative",top:"-2px"},type:"primary",onClick:o[0]||(o[0]=K=>f.value="setting")},{default:l(()=>[k(x(e(w)("mainPasswordSetting.gesture.reset")),1)]),_:1})])]),_:1},8,["label"]),t(D,{label:e(w)("mainPasswordSetting.passwordType.common"),name:"common",style:{"text-align":"center"}},{default:l(()=>[t(F,{inline:!0,"label-width":"100px",style:{"margin-top":"20px"}},{default:l(()=>[t(g,{label:e(w)("mainPasswordSetting.form.newMainPassword")},{default:l(()=>[t(r,{type:"password",modelValue:e(V),"onUpdate:modelValue":o[1]||(o[1]=K=>de(V)?V.value=K:null),style:{width:"231px"}},null,8,["modelValue"])]),_:1},8,["label"]),t(g,{label:e(w)("mainPasswordSetting.form.newMainPasswordAffirm")},{default:l(()=>[t(r,{type:"password",modelValue:e(P),"onUpdate:modelValue":o[2]||(o[2]=K=>de(P)?P.value=K:null),style:{width:"231px"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:2},[e(i)==="common"?{name:"footer",fn:l(()=>[B("span",ol,[t(H,{type:"primary",disabled:!e(V),onClick:L},{default:l(()=>[k(x(e(w)("mainPasswordSetting.form.save")),1)]),_:1},8,["disabled"])])]),key:"0"}:void 0]),1032,["fullscreen","modelValue","title"]),t(R,{ref_key:"mainPasswordVerifyRef",ref:p,onVerifyPass:U},null,512)],64)}}},rl={class:"dialog-footer"},dl={__name:"PasswordForm",props:{labelTree:Array},emits:["addPassword","updatePassword"],setup(X,{expose:_,emit:W}){const w=W,{t:M}=ae(),p=S(),v=G({password:!1}),i=S(""),V=G({uppercase:"ABCDEFGHJKLMNPQRSTUVWXYZ",lowercase:"abcdefghjkmnpqrstuvwxyz",number:"0123456789",symbol:"~!@#$^&*()_+.,;"}),P=()=>({id:0,name:"",address:"",userName:"",password:"",remark:"",label:"",insertTime:"",updateTime:""}),s=G(P()),f=G({length:16,number:!0,lowercase:!0,uppercase:!0,symbol:!0}),b=G({name:[{required:!0,message:M("passwordForm.form.name.verify"),trigger:"blur"}]}),L=()=>{if(!f.number&&!f.symbol&&!f.lowercase&&!f.uppercase){q.error(M("systemSetting.passwordRuleVerify"));return}let o=[];f.lowercase&&o.push(V.lowercase),f.uppercase&&o.push(V.uppercase),f.symbol&&o.push(V.symbol),f.number&&o.push(V.number),s.password=Yt(o,f.length)},U=async o=>{await o.validate(n=>{n&&(v.password=!1,i.value==="add"?(s.id=Date.now(),s.insertTime=ge().format("YYYY-MM-DD HH:mm:ss"),w("addPassword",JSON.parse(JSON.stringify(s)))):(s.updateTime=ge().format("YYYY-MM-DD HH:mm:ss"),w("updatePassword",JSON.parse(JSON.stringify(s)))))})},y=()=>{let o=be("defaultPasswordRule");if(o)for(let n in o)f[n]=o[n]},N=()=>{y();let o=P();for(let u in o)s[u]=o[u];be("autoGeneratePassword")&&L(),i.value="add",v.password=!0},I=o=>{y();for(let n in s)s[n]=o[n];i.value="update",v.password=!0},a=()=>document.documentElement.clientWidth;return _({showAddPassword:N,showUpdatePassword:I}),(o,n)=>{const u=ue,c=Pe,T=me,D=Fe,r=Re,g=We,F=Ue,E=kt,H=xe,J=Ct;return C(),z(J,{modelValue:e(v).password,"onUpdate:modelValue":n[13]||(n[13]=R=>e(v).password=R),title:e(i)==="add"?e(M)("passwordForm.form.addPassword"):e(M)("passwordForm.form.editPassword"),size:"620px",direction:a()>768?"rtl":"btt"},{footer:l(()=>[B("span",rl,[t(T,{onClick:n[12]||(n[12]=R=>U(e(p))),type:"primary"},{default:l(()=>[k(x(e(M)("passwordForm.generateForm.save")),1)]),_:1})])]),default:l(()=>[t(H,{ref_key:"passwordFormRef",ref:p,model:e(s),rules:e(b),"label-width":"70px",style:{"padding-right":"30px"}},{default:l(()=>[t(c,{label:e(M)("password.name"),prop:"name"},{default:l(()=>[t(u,{modelValue:e(s).name,"onUpdate:modelValue":n[0]||(n[0]=R=>e(s).name=R),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(M)("password.address")},{default:l(()=>[t(u,{modelValue:e(s).address,"onUpdate:modelValue":n[1]||(n[1]=R=>e(s).address=R),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(M)("password.userName")},{default:l(()=>[t(u,{modelValue:e(s).userName,"onUpdate:modelValue":n[2]||(n[2]=R=>e(s).userName=R),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(M)("password.password")},{default:l(()=>[t(F,{style:{width:"100%"}},{default:l(()=>[t(r,null,{default:l(()=>[t(D,null,{default:l(()=>[t(u,{modelValue:e(s).password,"onUpdate:modelValue":n[4]||(n[4]=R=>e(s).password=R),clearable:""},{append:l(()=>[t(T,{onClick:n[3]||(n[3]=R=>e(Ee)(e(s).password))},{default:l(()=>[k(x(e(M)("passwordForm.generateForm.password.copy")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{style:{"margin-top":"15px"}},{default:l(()=>[t(D,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(f).uppercase,"onUpdate:modelValue":n[5]||(n[5]=R=>e(f).uppercase=R),label:e(M)("passwordForm.generateForm.uppercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(D,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(f).lowercase,"onUpdate:modelValue":n[6]||(n[6]=R=>e(f).lowercase=R),label:e(M)("passwordForm.generateForm.lowercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(D,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(f).number,"onUpdate:modelValue":n[7]||(n[7]=R=>e(f).number=R),label:e(M)("passwordForm.generateForm.number"),border:""},null,8,["modelValue","label"])]),_:1}),t(D,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(f).symbol,"onUpdate:modelValue":n[8]||(n[8]=R=>e(f).symbol=R),label:e(M)("passwordForm.generateForm.symbol"),border:""},null,8,["modelValue","label"])]),_:1})]),_:1}),t(r,{style:{"margin-top":"15px"}},{default:l(()=>[t(D,{style:{"text-align":"center"}},{default:l(()=>[t(u,{modelValue:e(f).length,"onUpdate:modelValue":n[9]||(n[9]=R=>e(f).length=R),size:"small",style:{width:"120px"}},{prepend:l(()=>[k(x(e(M)("passwordForm.generateForm.length")),1)]),_:1},8,["modelValue"]),t(T,{plain:"",size:"small",style:{position:"relative",top:"-5px","margin-left":"10px"},type:"success",onClick:L},{default:l(()=>[k(x(e(M)("passwordForm.generateForm.randomPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),t(c,{label:e(M)("password.label")},{default:l(()=>[t(E,{modelValue:e(s).label,"onUpdate:modelValue":n[10]||(n[10]=R=>e(s).label=R),"value-key":"id",data:X.labelTree,"check-strictly":"",multiple:"","default-expand-all":"",placeholder:e(M)("password.label.placeholder"),filterable:""},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),t(c,{label:e(M)("password.remark")},{default:l(()=>[t(u,{type:"textarea",placeholder:e(M)("passwordForm.generateForm.remark"),rows:4,modelValue:e(s).remark,"onUpdate:modelValue":n[11]||(n[11]=R=>e(s).remark=R)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","direction"])}}};const il={class:"label-tree-node"},ul=["onClick","onBlur"],ml={class:"label-tree-node-menu"},cl={__name:"LabelTree",emits:["labelCheckChange","labelTreeChange"],setup(X,{expose:_,emit:W}){const{t:w}=ae(),M=W,p=S(),v=S([]),i=S([]),V=S(!1),P=()=>{let a=p.value.getCheckedNodes();M("labelCheckChange",a)},s=(a,o)=>a?o.label.includes(a):!0,f=a=>{const o={id:Date.now(),label:w("labelTree.addLabel"),children:[]};a.children||(a.children=[]),a.children.push(o)},b=(a,o)=>{const n=a.parent,u=n.data.children||n.data,c=u.findIndex(T=>T.id===o.id);u.splice(c,1)},L=a=>!a.edit,U=()=>{i.value.push({id:Date.now(),label:w("labelTree.firstAddLabel"),children:[]})},y=()=>{V.value&&Xe("labelTree.json",{labelTree:i.value})},N=a=>{i.value=a};return Le(v,a=>{p.value.filter(a)}),Le(i,()=>{y(),M("labelTreeChange",i.value)},{deep:!0}),(()=>{Ze("labelTree.json").then(a=>{a&&a.labelTree?i.value=a.labelTree:i.value=[],V.value=!0}).catch(a=>{Ge.error(a.code)})})(),_({setLabelTree:N}),(a,o)=>{const n=ue,u=me,c=De,T=St,D=Vt,r=Ue;return C(),z(r,null,{header:l(()=>[k(x(e(w)("labelTree.title")),1)]),default:l(()=>[t(n,{modelValue:e(v),"onUpdate:modelValue":o[0]||(o[0]=g=>de(v)?v.value=g:null),clearable:"",placeholder:e(w)("labelTree.search.placeholder")},null,8,["modelValue","placeholder"]),t(D,{height:"35vh"},{default:l(()=>[t(T,{data:e(i),"show-checkbox":"",ref_key:"labelTreeRef",ref:p,draggable:"","node-key":"id",style:{"margin-top":"10px"},onCheck:P,"filter-node-method":s,"expand-on-click-node":!1,"allow-drag":L,"default-expand-all":""},{empty:l(()=>[t(u,{size:"small",type:"primary",plain:"",onClick:U},{default:l(()=>[k(x(e(w)("labelTree.firstAddLabel")),1)]),_:1})]),default:l(({node:g,data:F})=>[B("span",il,[g.edit?Y("",!0):(C(),O("span",{key:0,onClick:E=>g.edit=!0,onBlur:E=>g.edit=!1},x(F.label),41,ul)),g.edit?(C(),z(n,{key:1,style:{width:"60%"},ref:g.id+"_input",size:"small",onBlur:E=>g.edit=!1,modelValue:F.label,"onUpdate:modelValue":E=>F.label=E},null,8,["onBlur","modelValue","onUpdate:modelValue"])):Y("",!0),B("span",ml,[t(c,{onClick:E=>f(F),type:"primary",underline:!1},{default:l(()=>[k(x(e(w)("labelTree.tree.add")),1)]),_:2},1032,["onClick"]),t(c,{onClick:E=>b(g,F),type:"danger",underline:!1,style:{"margin-left":"8px"}},{default:l(()=>[k(x(e(w)("labelTree.tree.remove")),1)]),_:2},1032,["onClick"])])])]),_:1},8,["data"])]),_:1})]),_:1})}}},pl=Ke(cl,[["__scopeId","data-v-e3fc3f54"]]);const Ce=X=>(At("data-v-15cd6e55"),X=X(),zt(),X),fl={style:{display:"flex","justify-content":"space-between"}},wl={class:"hidden-xs-only"},gl=Ce(()=>B("br",null,null,-1)),_l={key:1},vl={style:{display:"flex","justify-content":"end"},class:"password-title-right"},bl=Ce(()=>B("div",{class:"password-strength",style:{"background-color":"#67C23A"}},null,-1)),yl=Ce(()=>B("div",{class:"password-strength",style:{"background-color":"#E6A23C"}},null,-1)),hl=Ce(()=>B("div",{class:"password-strength",style:{"background-color":"#F56C6C"}},null,-1)),Pl={key:0},xl={class:"password-text"},kl={class:"pass-action-div"},Cl={__name:"IndexPage",setup(X){const{t:_,locale:W}=ae(),w=S(),M=S(),p=S(),v=S(),i=S(),V=S(),P=G({}),s=S(""),f=S(""),b=S(""),L=S(!1),U=S(""),y=S([]),N=S([]),I=S([]),a=S([]),o=async()=>{if(!s.value&&!I.value){N.value=y.value;return}let d=[];for(let m=0;m<y.value.length;m++){let A=y.value[m].name||"",j=y.value[m].userName||"",se=y.value[m].address||"",oe=y.value[m].remark||"",ne=y.value[m].password||"",Te=!s.value||A.includes(s.value)||j.includes(s.value)||se.includes(s.value)||oe.includes(s.value)||ne.includes(s.value),fe=!1;if(I.value.length>0)for(let we=0;we<I.value.length;we++){let ee=I.value[we];y.value[m].label&&y.value[m].label.includes(ee.id)&&(fe=!0)}else fe=!0;Te&&fe&&d.push(y.value[m])}N.value=d},n=()=>{w.value.showAddPassword()},u=d=>{w.value.showUpdatePassword(d)},c=d=>{y.value.unshift(d),ce(),o()},T=d=>{for(let m=0;m<y.value.length;m++)if(y.value[m].id===d.id){y.value[m]=d,ce(),o();break}},D=()=>{U.value=_e(f.value,JSON.stringify(y.value)),L.value=!1,N.value=[],y.value=[],f.value="",M.value.delLocalMainPassword()},r=()=>{M.value.verifyMainPassword()},g=d=>{let m=_("password.name")+": "+d.name+`\r
`;d.address&&(m+=_("password.address")+": "+d.address+`\r
`),d.userName&&(m+=_("password.userName")+": "+d.userName+`\r
`),d.password&&(m+=_("password.password")+": "+d.password+`\r
`),d.remark&&(m+=d.remark+`\r
`),m=m.substring(0,m.length-2),Ee(m)},F=d=>{for(let m=0;m<y.value.length;m++)if(y.value[m].id===d.id){y.value.splice(m,1),ce(),o(),q.success(_("index.table.delete.success"));break}},E=d=>{f.value=d;let m=ie(d,U.value);y.value=JSON.parse(m),L.value=!0,o()},H=(d,m)=>{f.value=d,b.value=m,ce(),q.success(_("index.mainPassword.changeSuccess"))},J=()=>{v.value.openSystemSetting()},R=()=>{p.value.updateMainPassword()},K=(d,m)=>{P[d]=m,d==="sortChange"&&Se(m)},Se=d=>{d==="insertTimeDesc"?h("insertTime",-1):d==="insertTimeAsc"?h("insertTime",1):d==="name"&&h("name",1),ce(),o()},te=d=>{let m=0;return/[0-9]/.test(d)&&m++,/[a-z]/.test(d)&&m++,/[A-Z]/.test(d)&&m++,/[^0-9a-zA-Z_]/.test(d)&&m++,d.length<6&&m>2&&(m=2),Ve()>2&&m>2&&(m=2),m>3?3:m},Ve=d=>{let m=0;for(let A=0;A<y.value.length;A++)y.value[A].password===d&&m++;return m},pe=d=>{let m=0;for(let A=0;A<y.value.length;A++){if(!y.value[A].password)continue;let j=te(y.value[A].password);d===j&&m++}return m},h=(d,m)=>{y.value.sort((A,j)=>(A=A[d],j=j[d],A<j?m*-1:A>j?m*1:0))},ce=()=>{if(!L.value)return;U.value=_e(f.value,JSON.stringify(y.value));let d=_e(f.value,"password-x");Q.commit("setVerifyCode",d),Xe("password.json",{verifyValue:d,mainPasswordType:b.value,passwordCiphertext:U.value})},et=()=>{Ze("password.json").then(d=>{if(d.verifyValue){let m=d.verifyValue;b.value=d.mainPasswordType||"common",Q.commit("setVerifyCode",m),Q.commit("setMainPasswordType",b.value),U.value=d.passwordCiphertext,M.value.verifyMainPassword(!0)}else L.value=!0,p.value.settingMainPassword()}).catch(d=>{console.error(d),Ge.error("error-1000："+d)})},tt=d=>{I.value=d,o()},lt=d=>{a.value=d},at=d=>{if(!d)return"";let m=[];return Ne(a.value,d,m),m},Ne=(d,m,A)=>{for(let j=0;j<d.length;j++)m.includes(d[j].id)&&A.push(d[j].label),d[j].children&&d[j].children.length>0&&Ne(d[j].children,m,A)},st=()=>{i.value.downloadExcelTemplate()},ot=()=>{i.value.importExcel(a.value)},nt=()=>{i.value.exportExcel(y.value,a.value)},rt=(d,m)=>{if(d.length!==0){for(let A=d.length-1;A>=0;A--)y.value.unshift(d[A]);V.value.setLabelTree(m),ce(),o()}},dt=()=>{v.value.logout()};return He(()=>{let d=qe();for(let m in d)P[m]=d[m];P.language&&P.language!==W.value&&(W.value=P.language),et()}),(d,m)=>{const A=je,j=ue,se=me,oe=Tt,ne=Mt,Te=Et,fe=Ft,we=Rt,ee=Dt,ye=De,it=Nt,ut=Ut,mt=It,ct=Ue,Ae=Fe,pt=pl,ft=Re,wt=dl,gt=Qe,_t=nl,vt=ll,bt=Xt;return C(),O(Z,null,[t(ft,{id:"passwordBody"},{default:l(()=>[t(Ae,{xl:{span:16,offset:2},lg:{span:19},md:{span:19}},{default:l(()=>[t(ct,null,{header:l(()=>[B("div",fl,[B("div",null,[B("div",wl,[e(y)?(C(),z(A,{key:0,class:"password-table-title"},{default:l(()=>[k(x(e(y).length)+" "+x(e(_)("index.title.passwordCount")),1)]),_:1})):Y("",!0),gl,e(P).showPasswordStrength?(C(),O("div",_l,[t(A,{class:"password-table-strength"},{default:l(()=>[k(x(e(_)("index.title.strength"))+"（ ",1),t(A,{type:"success"},{default:l(()=>[k(x(e(_)("index.title.strength.strong")),1)]),_:1}),k(" : "+x(pe(3))+" ",1),t(A,{style:{"margin-left":"5px"},type:"warning"},{default:l(()=>[k(x(e(_)("index.title.strength.medium")),1)]),_:1}),k(" : "+x(pe(2))+" ",1),t(A,{style:{"margin-left":"5px"},type:"danger"},{default:l(()=>[k(x(e(_)("index.title.strength.weak")),1)]),_:1}),k(" : "+x(pe(1))+"） ",1)]),_:1})])):Y("",!0)])]),B("div",vl,[B("div",null,[t(j,{modelValue:e(s),"onUpdate:modelValue":m[0]||(m[0]=$=>de(s)?s.value=$:null),style:{"max-width":"300px"},clearable:"",placeholder:e(_)("index.title.search"),"prefix-icon":e(jt),disabled:!e(f),onKeyup:Je(o,["enter"])},null,8,["modelValue","placeholder","prefix-icon","disabled","onKeyup"])]),B("div",null,[t(se,{disabled:!e(f)||!e(L),type:"primary",plain:"",onClick:m[1]||(m[1]=$=>n())},{default:l(()=>[k(x(e(_)("index.title.addPassword")),1)]),_:1},8,["disabled"])]),B("div",null,[e(f)?Y("",!0):(C(),z(oe,{key:0,content:e(_)("index.title.unlock"),effect:"dark",placement:"top"},{default:l(()=>[t(se,{disabled:!e(U),icon:e(Gt),onClick:r},null,8,["disabled","icon"])]),_:1},8,["content"])),e(f)?(C(),z(oe,{key:1,content:e(_)("index.title.lock"),effect:"dark",placement:"top"},{default:l(()=>[t(se,{icon:e(Be),onClick:D},null,8,["icon"])]),_:1},8,["content"])):Y("",!0)]),t(fe,null,{dropdown:l(()=>[t(Te,null,{default:l(()=>[t(ne,{onClick:J},{default:l(()=>[k(x(e(_)("systemSetting.title")),1)]),_:1}),t(ne,{divided:"",onClick:ot},{default:l(()=>[k(x(e(_)("index.title.importExport.import")),1)]),_:1}),t(ne,{onClick:nt},{default:l(()=>[k(x(e(_)("index.title.importExport.export")),1)]),_:1}),t(ne,{onClick:st},{default:l(()=>[k(x(e(_)("index.title.importExport.download")),1)]),_:1}),t(ne,{divided:"",onClick:dt},{default:l(()=>[k(x(e(_)("index.title.logout")),1)]),_:1})]),_:1})]),default:l(()=>[t(se,{icon:e(Ht)},null,8,["icon"])]),_:1})])])]),default:l(()=>[t(mt,{height:"calc(100vh - 150px)",data:e(N)},{empty:l(()=>[t(we,{description:e(f)?e(_)("index.table.empty"):e(_)("index.table.lock")},ke({default:l(()=>[t(se,{onClick:r,plain:"",type:"primary"},{default:l(()=>[k(x(e(_)("index.title.unlock")),1)]),_:1})]),_:2},[e(f)?void 0:{name:"image",fn:l(()=>[t(e(Be))]),key:"0"}]),1032,["description"])]),default:l(()=>[e(P).showPasswordStrength?(C(),z(ee,{key:0,width:"30px"},{default:l($=>[te($.row.password)===3?(C(),z(oe,{key:0},{content:l(()=>[k(x(e(_)("index.title.strength")+"："+e(_)("index.title.strength.strong")),1)]),default:l(()=>[bl]),_:1})):Y("",!0),te($.row.password)===2?(C(),z(oe,{key:1},{content:l(()=>[k(x(e(_)("index.title.strength")+"："+e(_)("index.title.strength.medium")),1)]),default:l(()=>[yl]),_:1})):Y("",!0),te($.row.password)===1?(C(),z(oe,{key:2},{content:l(()=>[k(x(e(_)("index.title.strength")+"："+e(_)("index.title.strength.weak")),1)]),default:l(()=>[hl]),_:1})):Y("",!0)]),_:1})):Y("",!0),t(ee,{label:e(_)("password.name"),"min-width":"140px",prop:"name"},null,8,["label"]),t(ee,{label:e(_)("password.address"),"min-width":"200px",prop:"address"},{default:l($=>[e(Wt)($.row.address)?(C(),z(ye,{key:0,href:$.row.address,target:"_blank"},{default:l(()=>[k(x($.row.address),1)]),_:2},1032,["href"])):(C(),z(A,{key:1},{default:l(()=>[k(x($.row.address),1)]),_:2},1024))]),_:1},8,["label"]),t(ee,{label:e(_)("password.userName"),"min-width":"120px",prop:"userName"},null,8,["label"]),t(ee,{label:e(_)("password.password"),"min-width":"200px"},{default:l($=>[$.row.password?(C(),O("div",Pl,[B("span",xl,[$.row.show?Y("",!0):(C(),O(Z,{key:0},[k("•••••••")],64)),$.row.show?(C(),O(Z,{key:1},[k(x($.row.password),1)],64)):Y("",!0)]),B("div",kl,[$.row.show?Y("",!0):(C(),z(e(Jt),{key:0,onClick:le=>$.row.show=!$.row.show},null,8,["onClick"])),$.row.show?(C(),z(e(Ot),{key:1,onClick:le=>$.row.show=!$.row.show},null,8,["onClick"])):Y("",!0),t(e(Kt),{onClick:le=>e(Ee)($.row.password)},null,8,["onClick"])])])):Y("",!0)]),_:1},8,["label"]),t(ee,{label:e(_)("index.table.label"),"min-width":"130px"},{default:l($=>[(C(!0),O(Z,null,re(at($.row.label),le=>(C(),z(it,{style:{margin:"3px"},key:le},{default:l(()=>[k(x(le),1)]),_:2},1024))),128))]),_:1},8,["label"]),t(ee,{label:e(_)("password.remark"),"min-width":"100px",prop:"remark"},null,8,["label"]),t(ee,{"min-width":"140px",label:e(_)("index.table.operation")},{default:l($=>[t(ye,{type:"success",underline:!1,onClick:le=>g($.row)},{default:l(()=>[k(x(e(_)("index.table.share")),1)]),_:2},1032,["onClick"]),t(ye,{underline:!1,style:{"margin-left":"10px"},type:"primary",onClick:le=>u($.row)},{default:l(()=>[k(x(e(_)("index.table.edit")),1)]),_:2},1032,["onClick"]),t(ut,{title:e(_)("index.table.operation.affirmDelete"),"confirm-button-text":e(_)("index.table.operation.affirm"),"cancel-button-text":e(_)("index.table.operation.cancel"),onConfirm:le=>F($.row)},{reference:l(()=>[t(ye,{style:{"margin-left":"10px"},underline:!1,type:"danger"},{default:l(()=>[k(x(e(_)("index.table.operation.delete")),1)]),_:1})]),_:2},1032,["title","confirm-button-text","cancel-button-text","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),t(Ae,{xl:{span:4},lg:{span:5},md:{span:5},class:"hidden-sm-and-down",style:{"padding-left":"15px"}},{default:l(()=>[t(pt,{ref_key:"labelTreeRef",ref:V,onLabelCheckChange:tt,onLabelTreeChange:lt},null,512)]),_:1})]),_:1}),t(wt,{ref_key:"passwordFormRef",ref:w,labelTree:e(a),onAddPassword:c,onUpdatePassword:T},null,8,["labelTree"]),t(gt,{ref_key:"mainPasswordVerifyRef",ref:M,onVerifyPass:E},null,512),t(_t,{ref_key:"mainPasswordSettingRef",ref:p,onMainPasswordChange:H},null,512),t(vt,{ref_key:"systemSettingRef",ref:v,onUpdateMainPassword:R,onSystemChangeChange:K},null,512),t(bt,{ref_key:"importExportRef",ref:i,labelTree:e(a),onImportComplete:rt},null,8,["labelTree"])],64)}}},Kl=Ke(Cl,[["__scopeId","data-v-15cd6e55"]]);export{Kl as default};
