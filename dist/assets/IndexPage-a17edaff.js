import{E as Me}from"./exceljs-6b62d6db.js";import{F as ze}from"./file-saver-38a5c18e.js";import{h as we}from"./moment-fbc5633a.js";import{u as le}from"./vue-i18n-3214f365.js";import{E as q,a as Ye,b as ie,c as ue,d as ye,e as yt,f as ht,g as he,h as We,i as Fe,j as Re,k as Pe,l as je,m as De,n as Pt,o as xt,p as Ue,q as kt,r as Ct,s as Ge,t as St,u as Vt,v as Tt,w as Mt,x as Et,y as Ft,z as Rt,A as Dt,B as Ut,C as It,D as Nt}from"./element-plus-6342e0a0.js";import{r as M,o as V,c as O,X as J,b as He,u as e,O as Y,I as L,ac as xe,J as l,a as B,S as t,P as S,Q as C,A as re,R as Z,aj as ne,ak as Je,w as Le,aq as At,ar as zt}from"./@vue-8e6a53e5.js";import{m as Lt}from"./js-md5-11f5a111.js";import{h as Oe}from"./@vueuse-9ffc2ac5.js";import{d as de,s as Q,g as _e,a as $e,e as ge,_ as Ke,p as Xe,b as Ze}from"./index-62da80b3.js";import{u as $t}from"./vue-router-c2e97886.js";import{l as qe,u as Bt,g as ve,c as Ee,r as Yt,i as Wt}from"./global-92074fcc.js";import{m as jt,u as Gt,n as Be,o as Ht,v as Jt,h as Ot,r as Kt}from"./@element-plus-169d18e8.js";import"./ali-oss-21f5c855.js";import"./@intlify-6e8dbf92.js";import"./lodash-es-f5bdeb48.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./escape-html-cf2a8097.js";import"./normalize-wheel-es-ed76fb12.js";import"./crypto-js-d55471a7.js";import"./vuex-7c7bb3a2.js";import"./cos-js-sdk-v5-31c61e27.js";const Xt={__name:"ImportExport",emits:["importComplete"],setup(K,{expose:_,emit:W}){const{t:w}=le(),E=W,c=M(),v=M(),d=M(0),T=a=>{c.value.click(),v.value=a},k=async()=>{if(c.value.files===0)return;d.value=Date.now();const a=new Me.Workbook;a.xlsx.load(c.value.files[0]).then(()=>{a.eachSheet(function(o){if(o.rowCount<2){q.error(w("importExport.data.empty")),c.value.value="";return}let n=[];for(let i=2;i<=o.rowCount;i++){let m=o.getRow(i),x=s(m.getCell(1).value),y=s(m.getCell(2).value),f=s(m.getCell(3).value),g=s(m.getCell(4).value),F=s(m.getCell(5).value),R=s(m.getCell(6).value),j=s(m.getCell(7).value),X=s(m.getCell(8).value);x&&n.push({id:d.value++,name:x,address:y,userName:f,password:g,remark:R,label:p(F),insertTime:j,updateTime:X})}E("importComplete",n,v.value),c.value.value=""})}).catch(o=>{q.error(o),c.value.value=""})},s=a=>a?typeof a=="object"?a instanceof Date?we(a).format("YYYY-MM-DD HH:mm:ss"):a.text:a.toString():"",p=a=>{if(!a)return"";let o=[],n=a.split("、");for(let i=0;i<n.length;i++){let m=b(v.value,n[i],"");if(m)o.push(m);else{let x=[];A(v.value,n[i].split(">"),0,x);for(let y=0;y<x.length;y++)o.push(x[y])}}return Array.from(new Set(o))},b=(a,o,n)=>{for(let i=0;i<a.length;i++){let m=n?n+">"+a[i].label:a[i].label;if(o===m)return a[i].id;if(a[i].children&&a[i].children.length>0)return b(a[i].children,o,m)}},A=(a,o,n,i)=>{if(!o[n])return;for(let x=0;x<a.length;x++)if(a[x].label===o[n])return o[n+1]||i.push(a[x].id),A(a[x].children,o,n+1,i);let m={id:d.value++,label:o[n],children:[]};a.push(m),o[n+1]||i.push(m.id),A(m.children,o,n+1,i)},I=async(a,o)=>{v.value=o;const n=new Me.Workbook,i=n.addWorksheet("sheet1");i.getCell("A1").value=w("password.name"),i.getCell("B1").value=w("password.address"),i.getCell("C1").value=w("password.userName"),i.getCell("D1").value=w("password.password"),i.getCell("E1").value=w("password.label"),i.getCell("F1").value=w("password.remark"),i.getCell("G1").value=w("password.insertTime"),i.getCell("H1").value=w("password.updateTime");for(let m=0;m<a.length;m++){let x=a[m].insertTime;x||(x=we().format("YYYY-MM-DD HH:mm:ss")),i.getCell("A"+(m+2)).value=a[m].name,i.getCell("B"+(m+2)).value=a[m].address,i.getCell("C"+(m+2)).value=a[m].userName,i.getCell("D"+(m+2)).value=a[m].password,i.getCell("E"+(m+2)).value=P(a[m].label),i.getCell("F"+(m+2)).value=a[m].remark,i.getCell("G"+(m+2)).value=x,i.getCell("H"+(m+2)).value=a[m].updateTime}n.xlsx.writeBuffer().then(m=>{let x=new Blob([m],{type:"application/octet-stream"});ze.saveAs(x,w("importExport.exportName")+"_"+we().format("YYYY-MM-DD HH:mm:ss")+".xlsx")})},P=a=>{if(!a)return"";let o=[];return N(v.value,a,o,""),o.join("、")},N=(a,o,n,i)=>{for(let m=0;m<a.length;m++){let x=i?i+">"+a[m].label:a[m].label;o.includes(a[m].id)&&n.push(x),a[m].children&&a[m].children.length>0&&N(a[m].children,o,n,x)}};return _({importExcel:T,exportExcel:I,downloadExcelTemplate:()=>{const a=new Me.Workbook,o=a.addWorksheet("sheet1");o.getCell("A1").value=w("password.name"),o.getCell("B1").value=w("password.address"),o.getCell("C1").value=w("password.userName"),o.getCell("D1").value=w("password.password"),o.getCell("E1").value=w("password.label"),o.getCell("F1").value=w("password.remark"),o.getCell("G1").value=w("password.insertTime"),o.getCell("H1").value=w("password.updateTime"),a.xlsx.writeBuffer().then(n=>{let i=new Blob([n],{type:"application/octet-stream"});ze.saveAs(i,w("importExport.importTemplateName")+".xlsx")})}}),(a,o)=>(V(),O("input",{type:"file",onChange:k,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ref_key:"fileUploadInput",ref:c,style:{display:"none"}},null,544))}},Zt=["width","height"],Ie={__name:"GesturePassword",props:{size:{type:Number,default:300},count:{type:Number,default:3}},emits:["complete"],setup(K,{expose:_,emit:W}){const w=Oe(),E=W,c=M();let v=K;const d=J({padding:v.size*.18,background:w.value?"rgb(20,20,20)":"#fff",failColor:"#F56C6C",passColor:"#67C23A",point:{color:"#409EFF",size:v.size*.023,selected:{range:v.size*.07,color:"#409EFF",size:v.size*.023,madding:{color:"#409EFF",size:v.size*.07,lineWidth:1}}},line:{color:"#409EFF",width:2}}),T=M({}),k=M([]),s=M(!1),p=M("");let b=null;const A=()=>{d.background=w.value?"rgb(20,20,20)":"#fff",b=c.value.getContext("2d"),I()},I=()=>{b.fillStyle=d.background,b.fillRect(0,0,v.size,v.size),T.value=[];let f=(v.size-d.padding*2)/(v.count-1),g=1;for(let F=0;F<v.count;F++)for(let R=0;R<v.count;R++){let j=d.padding+R*f,X=d.padding+F*f,D=f/2,G={id:g,x:j,y:X,startX:j-D,endX:j+D,startY:X-D,endY:X+D,h:f,w:f};P(G),T.value[g]=G,g++}},P=f=>{let g=m(f);g&&(b.beginPath(),p.value==="fail"?b.strokeStyle=d.failColor:p.value==="pass"?b.strokeStyle=d.passColor:b.strokeStyle=d.point.selected.madding.color,b.lineWidth=d.point.selected.madding.lineWidth,b.arc(f.x,f.y,d.point.selected.madding.size,0,Math.PI*2),b.stroke()),b.beginPath(),g?(p.value==="fail"?b.fillStyle=d.failColor:p.value==="pass"?b.fillStyle=d.passColor:b.fillStyle=d.point.selected.madding.color,b.arc(f.x,f.y,d.point.selected.size,0,Math.PI*2)):(b.fillStyle=d.point.color,b.arc(f.x,f.y,d.point.size,0,Math.PI*2)),b.fill()},N=()=>{s.value=!0},U=()=>{if(!s.value)return;s.value=!1;let f=o();if(f){let g=Lt(f);E("complete",g)}I(),i()},a=f=>{p.value=f,I(),i(),f?setTimeout(()=>{p.value="",k.value=[],I()},500):(k.value=[],I())},o=()=>{let f="";for(let g=0;g<k.value.length;g++)f+=k.value[g].id+",";return f&&(f=f.substring(0,f.length-1)),f},n=f=>{let g=f.offsetX,F=f.offsetY;if(I(),i(g,F),!s.value)return;let R=x(g,F);!R||m(R)||(k.value.push(R),I(),i(g,F))},i=(f,g)=>{let F=x(f,g);if(F&&p.value===""&&(b.beginPath(),b.strokeStyle=d.point.selected.madding.color,b.lineWidth=d.point.selected.madding.lineWidth,b.arc(F.x,F.y,d.point.selected.madding.size,0,Math.PI*2),b.stroke()),k.value.length!==0){b.beginPath(),p.value==="fail"?b.strokeStyle=d.failColor:p.value==="pass"?b.strokeStyle=d.passColor:b.strokeStyle=d.line.color,b.lineWidth=d.line.width,b.lineCap="round",b.moveTo(k.value[0].x,k.value[0].y);for(let R=1;R<k.value.length;R++)b.lineTo(k.value[R].x,k.value[R].y);s.value&&f&&g&&p.value===""&&b.lineTo(f,g),b.stroke()}},m=f=>{for(let g=0;g<k.value.length;g++)if(f.id===k.value[g].id)return!0;return!1},x=(f,g)=>{for(let F in T.value){let R=T.value[F];if(f>R.startX+d.point.selected.range&&f<R.endX-d.point.selected.range&&g>R.startY+d.point.selected.range&&g<R.endY-d.point.selected.range)return R}},y=f=>{let g=f.touches[0].clientX-c.value.offsetLeft,F=f.touches[0].clientY-c.value.offsetTop;n({offsetX:g,offsetY:F})};return He(()=>{A()}),_({setVerifyStatus:a}),(f,g)=>e(v).size?(V(),O("canvas",{key:0,width:e(v).size,height:e(v).size,ref_key:"canvasRef",ref:c,onMousedown:N,onMouseup:U,onMousemove:g[0]||(g[0]=F=>n(F)),onMouseleave:U,onTouchstart:N,onTouchend:U,onTouchmove:y},null,40,Zt)):Y("",!0)}},qt={style:{"text-align":"center"}},Qt={class:"dialog-footer"},el={__name:"DeleteAccount",emits:["deleteAccount"],setup(K,{expose:_,emit:W}){const{t:w}=le(),E=W,c=M(),v=J({deleteAccount:!1}),d=M(""),T=M(""),k=()=>{let b=de(T.value,Q.state.verifyCode);if(b&&b==="password-x"){d.value==="gesture"&&c.value.setVerifyStatus("pass");let A=localStorage.getItem("databaseForm"),I=de(_e(),A);if(JSON.parse(I).keyId==="LTAI5tRPBc5sY6KbZd1Vc1jU"){q.error("演示账号不能注销");return}$e("password.json"),$e("labelTree.json"),localStorage.removeItem("systemConfig"),q.success(w("systemSetting.deleteAccount.success")),E("deleteAccount")}else d.value==="common"?q.error(w("systemSetting.deleteAccount.mainPasswordError")):c.value.setVerifyStatus("fail")},s=()=>{d.value=Q.state.mainPasswordType,v.deleteAccount=!0},p=b=>{T.value=b,k()};return _({showDeleteAccount:s}),(b,A)=>{const I=Ye,P=Ie,N=ie,U=ue,a=ye;return V(),L(a,{modelValue:e(v).deleteAccount,"onUpdate:modelValue":A[1]||(A[1]=o=>e(v).deleteAccount=o),title:e(w)("systemSetting.deleteAccount"),width:"400px"},xe({default:l(()=>[t(I,{type:"error",closable:!1},{default:l(()=>[S(C(e(w)("systemSetting.deleteAccount.text")),1)]),_:1}),B("div",qt,[e(d)==="gesture"?(V(),L(P,{key:0,ref_key:"gesturePasswordRef",ref:c,onComplete:p},null,512)):Y("",!0),e(d)==="common"?(V(),L(N,{key:1,modelValue:e(T),"onUpdate:modelValue":A[0]||(A[0]=o=>re(T)?T.value=o:null),style:{"margin-top":"20px"}},null,8,["modelValue"])):Y("",!0)])]),_:2},[e(d)==="common"?{name:"footer",fn:l(()=>[B("span",Qt,[t(U,{type:"danger",onClick:k},{default:l(()=>[S(C(e(w)("systemSetting.deleteAccount.affirm")),1)]),_:1})])]),key:"0"}:void 0]),1032,["modelValue","title"])}}},tl={class:"dialog-footer"},ll={__name:"SystemSetting",emits:["updateMainPassword","deleteAccount","systemChangeChange"],setup(K,{expose:_,emit:W}){const w=$t(),E=Oe(),{t:c,locale:v}=le(),d=W,T=M(),k=J({setting:!1}),s=J({language:"zh-cn",cacheMainPassword:!0,autoGeneratePassword:!0,darkMode:!1,sortRule:"insertTimeDesc",showPasswordStrength:!1,defaultPasswordRule:{length:16,number:!0,lowercase:!0,uppercase:!0,symbol:!0}}),p=J([{key:"zh-cn",label:"简体中文"},{key:"en-us",label:"English"}]),b=J([{key:"insertTimeDesc",label:c("systemSetting.sort.insertTimeDesc")},{key:"insertTimeAsc",label:c("systemSetting.sort.insertTimeAsc")},{key:"name",label:c("systemSetting.sort.name")}]),A=J([{key:!1,label:c("systemSetting.topic.light")},{key:!0,label:c("systemSetting.topic.dark")}]),I=J([{key:!0,label:c("systemSetting.cacheMainPassword.enable")},{key:!1,label:c("systemSetting.cacheMainPassword.disabled")}]),P=J([{key:!0,label:c("passwordForm.autoGeneratePassword.enable")},{key:!1,label:c("passwordForm.autoGeneratePassword.disabled")}]),N=J([{key:!0,label:c("systemSetting.showPasswordStrength.enable")},{key:!1,label:c("systemSetting.showPasswordStrength.disabled")}]);let U=null;const a=()=>{let x=qe();if(x)for(let y in x)s[y]=x[y];s.language!==v.value&&(s.language=v.value),U=JSON.stringify(s),k.setting=!0},o=()=>{let x=s.defaultPasswordRule;if(!x.number&&!x.symbol&&!x.lowercase&&!x.uppercase){q.error(c("systemSetting.passwordRuleVerify"));return}Bt(s),s.cacheMainPassword===!1&&localStorage.removeItem("mainPasswordCiphertext");let y=JSON.parse(U);s.language!==v.value&&(v.value=s.language,console.log("系统语言设置为：",s.language)),E.value!==s.darkMode&&(E.value=s.darkMode,console.log("暗黑模式设置为：",s.darkMode)),s.sortRule!==y.sortRule&&(d("systemChangeChange","sortChange",s.sortRule),console.log("排序规则设置为：",s.sortRule)),s.showPasswordStrength!==y.showPasswordStrength&&(d("systemChangeChange","showPasswordStrength",s.showPasswordStrength),console.log("是否显示密码强度设置为：",s.showPasswordStrength)),k.setting=!1},n=()=>{localStorage.removeItem("databaseForm"),localStorage.removeItem("mainPasswordCiphertext"),Q.commit("delDatabase"),Q.commit("delDatabaseForm"),w.push("/login")},i=()=>{k.setting=!1,d("updateMainPassword")},m=()=>{k.setting=!1,T.value.showDeleteAccount()};return _({logout:n,openSystemSetting:a,showUpdateMainPassword:i}),(x,y)=>{const f=yt,g=ht,F=he,R=We,j=Fe,X=ie,D=Re,G=ue,Ce=Pe,me=ye,Se=el;return V(),O(Z,null,[t(me,{modelValue:e(k).setting,"onUpdate:modelValue":y[11]||(y[11]=h=>e(k).setting=h),title:e(c)("systemSetting.title"),width:"600px"},{footer:l(()=>[B("span",tl,[t(G,{type:"primary",onClick:o},{default:l(()=>[S(C(e(c)("systemSetting.save")),1)]),_:1})])]),default:l(()=>[t(Ce,{model:e(s),"label-width":"150px"},{default:l(()=>[t(F,{label:e(c)("systemSetting.language")},{default:l(()=>[t(g,{modelValue:e(s).language,"onUpdate:modelValue":y[0]||(y[0]=h=>e(s).language=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(p),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("systemSetting.sort")},{default:l(()=>[t(g,{modelValue:e(s).sortRule,"onUpdate:modelValue":y[1]||(y[1]=h=>e(s).sortRule=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(b),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("systemSetting.topic")},{default:l(()=>[t(g,{modelValue:e(s).darkMode,"onUpdate:modelValue":y[2]||(y[2]=h=>e(s).darkMode=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(A),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("systemSetting.cacheMainPassword")},{default:l(()=>[t(g,{modelValue:e(s).cacheMainPassword,"onUpdate:modelValue":y[3]||(y[3]=h=>e(s).cacheMainPassword=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(I),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("passwordForm.autoGeneratePassword")},{default:l(()=>[t(g,{modelValue:e(s).autoGeneratePassword,"onUpdate:modelValue":y[4]||(y[4]=h=>e(s).autoGeneratePassword=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(P),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("systemSetting.showPasswordStrength")},{default:l(()=>[t(g,{modelValue:e(s).showPasswordStrength,"onUpdate:modelValue":y[5]||(y[5]=h=>e(s).showPasswordStrength=h)},{default:l(()=>[(V(!0),O(Z,null,ne(e(N),h=>(V(),L(f,{key:h.key,label:h.label,value:h.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(F,{label:e(c)("systemSetting.defaultPasswordRule")},{default:l(()=>[t(D,{style:{"margin-top":"15px"}},{default:l(()=>[t(j,{span:8},{default:l(()=>[t(R,{size:"small",modelValue:e(s).defaultPasswordRule.uppercase,"onUpdate:modelValue":y[6]||(y[6]=h=>e(s).defaultPasswordRule.uppercase=h),label:e(c)("passwordForm.generateForm.uppercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(j,{span:8},{default:l(()=>[t(R,{size:"small",modelValue:e(s).defaultPasswordRule.lowercase,"onUpdate:modelValue":y[7]||(y[7]=h=>e(s).defaultPasswordRule.lowercase=h),label:e(c)("passwordForm.generateForm.lowercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(j,{span:8},{default:l(()=>[t(R,{size:"small",modelValue:e(s).defaultPasswordRule.number,"onUpdate:modelValue":y[8]||(y[8]=h=>e(s).defaultPasswordRule.number=h),label:e(c)("passwordForm.generateForm.number"),border:""},null,8,["modelValue","label"])]),_:1}),t(j,{span:8},{default:l(()=>[t(R,{size:"small",modelValue:e(s).defaultPasswordRule.symbol,"onUpdate:modelValue":y[9]||(y[9]=h=>e(s).defaultPasswordRule.symbol=h),label:e(c)("passwordForm.generateForm.symbol"),border:""},null,8,["modelValue","label"])]),_:1}),t(j,{span:8},{default:l(()=>[B("div",null,[t(X,{size:"small",style:{position:"relative",top:"3px"},modelValue:e(s).defaultPasswordRule.length,"onUpdate:modelValue":y[10]||(y[10]=h=>e(s).defaultPasswordRule.length=h)},{prepend:l(()=>[S(C(e(c)("passwordForm.generateForm.length")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["label"]),t(F,null,{default:l(()=>[t(G,{plain:"",onClick:i},{default:l(()=>[S(C(e(c)("systemSetting.updateMainPassword")),1)]),_:1}),t(G,{plain:"",type:"danger",onClick:m},{default:l(()=>[S(C(e(c)("systemSetting.deleteAccount")),1)]),_:1}),t(G,{type:"warning",plain:"",onClick:n},{default:l(()=>[S(C(e(c)("systemSetting.logout")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(Se,{ref_key:"deleteAccountRef",ref:T,onDeleteAccount:n},null,512)],64)}}},al={style:{"text-align":"center"}},sl={class:"dialog-footer"},Qe={__name:"MainPasswordVerify",emits:["verifyPass"],setup(K,{expose:_,emit:W}){const{t:w}=le(),E=W,c=M(),v=M(""),d=M(""),T=J({verifyMainPassword:!1}),k=N=>{v.value=N,s()},s=()=>{let N=de(v.value,Q.state.verifyCode);N&&N==="password-x"?(d.value==="gesture"&&c.value.setVerifyStatus("pass"),E("verifyPass",v.value),b(v.value),v.value="",T.verifyMainPassword=!1):d.value==="common"?q.error(w("mainPasswordVerify.form.verify")):c.value.setVerifyStatus("fail")},p=()=>{localStorage.removeItem("mainPasswordCiphertext")},b=N=>{if(ve("cacheMainPassword")===!1)return;let a=_e(),o=ge(a,N);localStorage.setItem("mainPasswordCiphertext",o)},A=()=>{if(ve("cacheMainPassword")===!1)return null;let U=localStorage.getItem("mainPasswordCiphertext");if(!U)return null;let a=_e(),o=de(a,U);return o||null},I=(N=!0)=>{if(d.value=Q.state.mainPasswordType,!N){T.verifyMainPassword=!0;return}let U=A();if(!U){T.verifyMainPassword=!0;return}let a=de(U,Q.state.verifyCode);a&&a==="password-x"?E("verifyPass",U):T.verifyMainPassword=!0},P=M(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){P.value=document.documentElement.clientWidth<728}),_({verifyMainPassword:I,delLocalMainPassword:p}),(N,U)=>{const a=Ie,o=ie,n=he,i=Pe,m=ue,x=ye;return V(),L(x,{fullscreen:e(P),modelValue:e(T).verifyMainPassword,"onUpdate:modelValue":U[1]||(U[1]=y=>e(T).verifyMainPassword=y),title:e(w)("mainPasswordVerify.form.title"),width:"400px"},xe({default:l(()=>[B("div",al,[e(d)==="gesture"?(V(),L(a,{key:0,ref_key:"gesturePasswordRef",ref:c,onComplete:k},null,512)):Y("",!0),e(d)==="common"?(V(),L(i,{key:1,style:{padding:"10px"}},{default:l(()=>[t(n,null,{default:l(()=>[t(o,{modelValue:e(v),"onUpdate:modelValue":U[0]||(U[0]=y=>re(v)?v.value=y:null),placeholder:e(w)("mainPasswordVerify.form.mainPassword"),type:"password",onKeyup:Je(s,["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1})]),_:1})):Y("",!0)])]),_:2},[e(d)==="common"?{name:"footer",fn:l(()=>[B("span",sl,[t(m,{type:"primary",disabled:!e(v),onClick:s},{default:l(()=>[S(C(e(w)("mainPasswordVerify.form.save")),1)]),_:1},8,["disabled"])])]),key:"0"}:void 0]),1032,["fullscreen","modelValue","title"])}}},ol={class:"dialog-footer"},nl={__name:"MainPasswordSetting",emits:["mainPasswordChange"],setup(K,{expose:_,emit:W}){const{t:w}=le(),E=W,c=M(),v=M(),d=M("gesture"),T=M(""),k=M(""),s=J({mainPassword:!1}),p=M(""),b=a=>{p.value==="setting"?(T.value=a,p.value="affirm",v.value.setVerifyStatus("")):p.value==="affirm"&&(k.value=a,A())},A=()=>{if(T.value!==k.value){q.error(w("mainPasswordSetting.form.passwordsDiff"));return}let a=localStorage.getItem("databaseForm"),o=de(_e(),a);if(JSON.parse(o).accessKeyId==="LTAI5tRPBc5sY6KbZd1Vc1jU"){q.error("演示账号不能修改主密码");return}d.value==="gesture"?Q.commit("setMainPasswordType","gesture"):Q.commit("setMainPasswordType","common"),E("mainPasswordChange",T.value,d.value);let i=ve("cacheMainPassword");if(i||i==null){let m=_e(),x=ge(m,T.value);localStorage.setItem("mainPasswordCiphertext",x)}T.value="",k.value="",s.mainPassword=!1},I=()=>{p.value="setting",s.mainPassword=!0},P=()=>{c.value.verifyMainPassword(!1)},N=()=>{d.value==="gesture"&&(p.value="setting"),T.value="",k.value=""},U=M(document.documentElement.clientWidth<728);return window.addEventListener("resize",function(){U.value=document.documentElement.clientWidth<728}),_({settingMainPassword:I,updateMainPassword:P}),(a,o)=>{const n=Ye,i=je,m=Ie,x=De,y=Pt,f=ie,g=he,F=Pe,R=xt,j=ue,X=ye,D=Qe;return V(),O(Z,null,[t(X,{fullscreen:e(U),modelValue:e(s).mainPassword,"onUpdate:modelValue":o[4]||(o[4]=G=>e(s).mainPassword=G),title:e(w)("mainPasswordSetting.form.setMainPassword"),width:"470px"},xe({default:l(()=>[t(n,{type:"error",style:{position:"relative",top:"-10px"},closable:!1},{default:l(()=>[S(C(e(w)("mainPasswordSetting.forget.message")),1)]),_:1}),t(R,{modelValue:e(d),"onUpdate:modelValue":o[3]||(o[3]=G=>re(d)?d.value=G:null),style:{"margin-top":"10px"},type:"card",onTabChange:N},{default:l(()=>[t(y,{label:e(w)("mainPasswordSetting.passwordType.gesture"),name:"gesture",style:{"text-align":"center"}},{default:l(()=>[B("div",null,[e(p)==="setting"?(V(),L(i,{key:0},{default:l(()=>[S(C(e(w)("mainPasswordSetting.gesture.first")),1)]),_:1})):Y("",!0),e(p)==="affirm"?(V(),L(i,{key:1},{default:l(()=>[S(C(e(w)("mainPasswordSetting.gesture.affirm")),1)]),_:1})):Y("",!0)]),e(s).mainPassword&&e(d)==="gesture"?(V(),L(m,{key:0,ref_key:"gesturePasswordRef",ref:v,onComplete:b},null,512)):Y("",!0),B("div",null,[t(x,{underline:!1,style:{position:"relative",top:"-2px"},type:"primary",onClick:o[0]||(o[0]=G=>p.value="setting")},{default:l(()=>[S(C(e(w)("mainPasswordSetting.gesture.reset")),1)]),_:1})])]),_:1},8,["label"]),t(y,{label:e(w)("mainPasswordSetting.passwordType.common"),name:"common",style:{"text-align":"center"}},{default:l(()=>[t(F,{inline:!0,"label-width":"100px",style:{"margin-top":"20px"}},{default:l(()=>[t(g,{label:e(w)("mainPasswordSetting.form.newMainPassword")},{default:l(()=>[t(f,{type:"password",modelValue:e(T),"onUpdate:modelValue":o[1]||(o[1]=G=>re(T)?T.value=G:null),style:{width:"231px"}},null,8,["modelValue"])]),_:1},8,["label"]),t(g,{label:e(w)("mainPasswordSetting.form.newMainPasswordAffirm")},{default:l(()=>[t(f,{type:"password",modelValue:e(k),"onUpdate:modelValue":o[2]||(o[2]=G=>re(k)?k.value=G:null),style:{width:"231px"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:2},[e(d)==="common"?{name:"footer",fn:l(()=>[B("span",ol,[t(j,{type:"primary",disabled:!e(T),onClick:A},{default:l(()=>[S(C(e(w)("mainPasswordSetting.form.save")),1)]),_:1},8,["disabled"])])]),key:"0"}:void 0]),1032,["fullscreen","modelValue","title"]),t(D,{ref_key:"mainPasswordVerifyRef",ref:c,onVerifyPass:I},null,512)],64)}}},rl={class:"dialog-footer"},dl={__name:"PasswordForm",props:{labelTree:Array},emits:["addPassword","updatePassword"],setup(K,{expose:_,emit:W}){const w=W,{t:E}=le(),c=M(),v=J({password:!1}),d=M(""),T=J({uppercase:"ABCDEFGHJKLMNPQRSTUVWXYZ",lowercase:"abcdefghjkmnpqrstuvwxyz",number:"0123456789",symbol:"~!@#$^&*()_+.,;"}),k=()=>({id:0,name:"",address:"",userName:"",password:"",remark:"",label:"",insertTime:"",updateTime:""}),s=J(k()),p=J({length:16,number:!0,lowercase:!0,uppercase:!0,symbol:!0}),b=J({name:[{required:!0,message:E("passwordForm.form.name.verify"),trigger:"blur"}]}),A=()=>{if(!p.number&&!p.symbol&&!p.lowercase&&!p.uppercase){q.error(E("systemSetting.passwordRuleVerify"));return}let o=[];p.lowercase&&o.push(T.lowercase),p.uppercase&&o.push(T.uppercase),p.symbol&&o.push(T.symbol),p.number&&o.push(T.number),s.password=Yt(o,p.length)},I=async o=>{await o.validate(n=>{n&&(v.password=!1,d.value==="add"?(s.id=Date.now(),s.insertTime=we().format("YYYY-MM-DD HH:mm:ss"),w("addPassword",JSON.parse(JSON.stringify(s)))):(s.updateTime=we().format("YYYY-MM-DD HH:mm:ss"),w("updatePassword",JSON.parse(JSON.stringify(s)))))})},P=()=>{let o=ve("defaultPasswordRule");if(o)for(let n in o)p[n]=o[n]},N=()=>{P();let o=k();for(let i in o)s[i]=o[i];ve("autoGeneratePassword")&&A(),d.value="add",v.password=!0},U=o=>{P();for(let n in s)s[n]=o[n];d.value="update",v.password=!0},a=()=>document.documentElement.clientWidth;return _({showAddPassword:N,showUpdatePassword:U}),(o,n)=>{const i=ie,m=he,x=ue,y=Fe,f=Re,g=We,F=Ue,R=kt,j=Pe,X=Ct;return V(),L(X,{modelValue:e(v).password,"onUpdate:modelValue":n[13]||(n[13]=D=>e(v).password=D),title:e(d)==="add"?e(E)("passwordForm.form.addPassword"):e(E)("passwordForm.form.editPassword"),size:"620px",direction:a()>768?"rtl":"btt"},{footer:l(()=>[B("span",rl,[t(x,{onClick:n[12]||(n[12]=D=>I(e(c))),type:"primary"},{default:l(()=>[S(C(e(E)("passwordForm.generateForm.save")),1)]),_:1})])]),default:l(()=>[t(j,{ref_key:"passwordFormRef",ref:c,model:e(s),rules:e(b),"label-width":"70px",style:{"padding-right":"30px"}},{default:l(()=>[t(m,{label:e(E)("password.name"),prop:"name"},{default:l(()=>[t(i,{modelValue:e(s).name,"onUpdate:modelValue":n[0]||(n[0]=D=>e(s).name=D),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(E)("password.address")},{default:l(()=>[t(i,{modelValue:e(s).address,"onUpdate:modelValue":n[1]||(n[1]=D=>e(s).address=D),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(E)("password.userName")},{default:l(()=>[t(i,{modelValue:e(s).userName,"onUpdate:modelValue":n[2]||(n[2]=D=>e(s).userName=D),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(E)("password.password")},{default:l(()=>[t(F,{style:{width:"100%"}},{default:l(()=>[t(f,null,{default:l(()=>[t(y,null,{default:l(()=>[t(i,{modelValue:e(s).password,"onUpdate:modelValue":n[4]||(n[4]=D=>e(s).password=D),clearable:""},{append:l(()=>[t(x,{onClick:n[3]||(n[3]=D=>e(Ee)(e(s).password))},{default:l(()=>[S(C(e(E)("passwordForm.generateForm.password.copy")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{style:{"margin-top":"15px"}},{default:l(()=>[t(y,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(p).uppercase,"onUpdate:modelValue":n[5]||(n[5]=D=>e(p).uppercase=D),label:e(E)("passwordForm.generateForm.uppercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(y,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(p).lowercase,"onUpdate:modelValue":n[6]||(n[6]=D=>e(p).lowercase=D),label:e(E)("passwordForm.generateForm.lowercase"),border:""},null,8,["modelValue","label"])]),_:1}),t(y,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(p).number,"onUpdate:modelValue":n[7]||(n[7]=D=>e(p).number=D),label:e(E)("passwordForm.generateForm.number"),border:""},null,8,["modelValue","label"])]),_:1}),t(y,{xs:{span:12},md:{span:6},style:{"text-align":"center"}},{default:l(()=>[t(g,{size:"small",modelValue:e(p).symbol,"onUpdate:modelValue":n[8]||(n[8]=D=>e(p).symbol=D),label:e(E)("passwordForm.generateForm.symbol"),border:""},null,8,["modelValue","label"])]),_:1})]),_:1}),t(f,{style:{"margin-top":"15px"}},{default:l(()=>[t(y,{style:{"text-align":"center"}},{default:l(()=>[t(i,{modelValue:e(p).length,"onUpdate:modelValue":n[9]||(n[9]=D=>e(p).length=D),size:"small",style:{width:"120px"}},{prepend:l(()=>[S(C(e(E)("passwordForm.generateForm.length")),1)]),_:1},8,["modelValue"]),t(x,{plain:"",size:"small",style:{position:"relative",top:"-5px","margin-left":"10px"},type:"success",onClick:A},{default:l(()=>[S(C(e(E)("passwordForm.generateForm.randomPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),t(m,{label:e(E)("password.label")},{default:l(()=>[t(R,{modelValue:e(s).label,"onUpdate:modelValue":n[10]||(n[10]=D=>e(s).label=D),"value-key":"id",data:K.labelTree,"check-strictly":"",multiple:"","default-expand-all":"",placeholder:e(E)("password.label.placeholder"),filterable:""},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),t(m,{label:e(E)("password.remark")},{default:l(()=>[t(i,{type:"textarea",placeholder:e(E)("passwordForm.generateForm.remark"),rows:4,modelValue:e(s).remark,"onUpdate:modelValue":n[11]||(n[11]=D=>e(s).remark=D)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","direction"])}}};const il={class:"label-tree-node"},ul=["onClick","onBlur"],ml={class:"label-tree-node-menu"},cl={__name:"LabelTree",emits:["labelCheckChange","labelTreeChange"],setup(K,{expose:_,emit:W}){const{t:w}=le(),E=W,c=M(),v=M([]),d=M([]),T=M(!1),k=()=>{let a=c.value.getCheckedNodes();E("labelCheckChange",a)},s=(a,o)=>a?o.label.includes(a):!0,p=a=>{const o={id:Date.now(),label:w("labelTree.addLabel"),children:[]};a.children||(a.children=[]),a.children.push(o)},b=(a,o)=>{const n=a.parent,i=n.data.children||n.data,m=i.findIndex(x=>x.id===o.id);i.splice(m,1)},A=a=>!a.edit,I=()=>{d.value.push({id:Date.now(),label:w("labelTree.firstAddLabel"),children:[]})},P=()=>{T.value&&Xe("labelTree.json",{labelTree:d.value})},N=a=>{d.value=a};return Le(v,a=>{c.value.filter(a)}),Le(d,()=>{P(),E("labelTreeChange",d.value)},{deep:!0}),(()=>{Ze("labelTree.json").then(a=>{a&&a.labelTree?d.value=a.labelTree:d.value=[],T.value=!0}).catch(a=>{Ge.error(a.code)})})(),_({setLabelTree:N}),(a,o)=>{const n=ie,i=ue,m=De,x=St,y=Vt,f=Ue;return V(),L(f,null,{header:l(()=>[S(C(e(w)("labelTree.title")),1)]),default:l(()=>[t(n,{modelValue:e(v),"onUpdate:modelValue":o[0]||(o[0]=g=>re(v)?v.value=g:null),clearable:"",placeholder:e(w)("labelTree.search.placeholder")},null,8,["modelValue","placeholder"]),t(y,{height:"35vh"},{default:l(()=>[t(x,{data:e(d),"show-checkbox":"",ref_key:"labelTreeRef",ref:c,draggable:"","node-key":"id",style:{"margin-top":"10px"},onCheck:k,"filter-node-method":s,"expand-on-click-node":!1,"allow-drag":A,"default-expand-all":""},{empty:l(()=>[t(i,{size:"small",type:"primary",plain:"",onClick:I},{default:l(()=>[S(C(e(w)("labelTree.firstAddLabel")),1)]),_:1})]),default:l(({node:g,data:F})=>[B("span",il,[g.edit?Y("",!0):(V(),O("span",{key:0,onClick:R=>g.edit=!0,onBlur:R=>g.edit=!1},C(F.label),41,ul)),g.edit?(V(),L(n,{key:1,style:{width:"60%"},ref:g.id+"_input",size:"small",onBlur:R=>g.edit=!1,modelValue:F.label,"onUpdate:modelValue":R=>F.label=R},null,8,["onBlur","modelValue","onUpdate:modelValue"])):Y("",!0),B("span",ml,[t(m,{onClick:R=>p(F),type:"primary",underline:!1},{default:l(()=>[S(C(e(w)("labelTree.tree.add")),1)]),_:2},1032,["onClick"]),t(m,{onClick:R=>b(g,F),type:"danger",underline:!1,style:{"margin-left":"8px"}},{default:l(()=>[S(C(e(w)("labelTree.tree.remove")),1)]),_:2},1032,["onClick"])])])]),_:1},8,["data"])]),_:1})]),_:1})}}},pl=Ke(cl,[["__scopeId","data-v-88b8237a"]]);const ke=K=>(At("data-v-15cd6e55"),K=K(),zt(),K),fl={style:{display:"flex","justify-content":"space-between"}},wl={class:"hidden-xs-only"},gl=ke(()=>B("br",null,null,-1)),_l={key:1},vl={style:{display:"flex","justify-content":"end"},class:"password-title-right"},bl=ke(()=>B("div",{class:"password-strength",style:{"background-color":"#67C23A"}},null,-1)),yl=ke(()=>B("div",{class:"password-strength",style:{"background-color":"#E6A23C"}},null,-1)),hl=ke(()=>B("div",{class:"password-strength",style:{"background-color":"#F56C6C"}},null,-1)),Pl={key:0},xl={class:"password-text"},kl={class:"pass-action-div"},Cl={__name:"IndexPage",setup(K){const{t:_,locale:W}=le(),w=M(),E=M(),c=M(),v=M(),d=M(),T=M(),k=J({}),s=M(""),p=M(""),b=M(""),A=M(!1),I=M(""),P=M([]),N=M([]),U=M([]),a=M([]),o=async()=>{if(!s.value&&!U.value){N.value=P.value;return}let r=[];for(let u=0;u<P.value.length;u++){let z=P.value[u].name||"",H=P.value[u].userName||"",ae=P.value[u].address||"",se=P.value[u].remark||"",oe=P.value[u].password||"",Te=!s.value||z.includes(s.value)||H.includes(s.value)||ae.includes(s.value)||se.includes(s.value)||oe.includes(s.value),pe=!1;if(U.value.length>0)for(let fe=0;fe<U.value.length;fe++){let ee=U.value[fe];P.value[u].label&&P.value[u].label.includes(ee.id)&&(pe=!0)}else pe=!0;Te&&pe&&r.push(P.value[u])}N.value=r},n=()=>{w.value.showAddPassword()},i=r=>{w.value.showUpdatePassword(r)},m=r=>{P.value.unshift(r),ce(),o()},x=r=>{for(let u=0;u<P.value.length;u++)if(P.value[u].id===r.id){P.value[u]=r,ce(),o();break}},y=()=>{I.value=ge(p.value,JSON.stringify(P.value)),A.value=!1,N.value=[],P.value=[],p.value="",E.value.delLocalMainPassword()},f=()=>{E.value.verifyMainPassword()},g=r=>{let u=_("password.name")+": "+r.name+`\r
`;r.address&&(u+=_("password.address")+": "+r.address+`\r
`),r.userName&&(u+=_("password.userName")+": "+r.userName+`\r
`),r.password&&(u+=_("password.password")+": "+r.password+`\r
`),r.remark&&(u+=r.remark+`\r
`),u=u.substring(0,u.length-2),Ee(u)},F=r=>{for(let u=0;u<P.value.length;u++)if(P.value[u].id===r.id){P.value.splice(u,1),ce(),o(),q.success(_("index.table.delete.success"));break}},R=r=>{p.value=r;let u=de(r,I.value);P.value=JSON.parse(u),A.value=!0,o()},j=(r,u)=>{p.value=r,b.value=u,ce(),q.success(_("index.mainPassword.changeSuccess"))},X=()=>{v.value.openSystemSetting()},D=()=>{c.value.updateMainPassword()},G=(r,u)=>{k[r]=u,r==="sortChange"&&Ce(u)},Ce=r=>{r==="insertTimeDesc"?Ve("insertTime",-1):r==="insertTimeAsc"?Ve("insertTime",1):r==="name"&&Ve("name",1),ce(),o()},me=r=>{let u=0;return/[0-9]/.test(r)&&u++,/[a-z]/.test(r)&&u++,/[A-Z]/.test(r)&&u++,/[^0-9a-zA-Z_]/.test(r)&&u++,r.length<6&&u>2&&(u=2),Se()>2&&u>2&&(u=2),u>3?3:u},Se=r=>{let u=0;for(let z=0;z<P.value.length;z++)P.value[z].password===r&&u++;return u},h=r=>{let u=0;for(let z=0;z<P.value.length;z++){if(!P.value[z].password)continue;let H=me(P.value[z].password);r===H&&u++}return u},Ve=(r,u)=>{P.value.sort((z,H)=>(z=z[r],H=H[r],z<H?u*-1:z>H?u*1:0))},ce=()=>{if(!A.value)return;I.value=ge(p.value,JSON.stringify(P.value));let r=ge(p.value,"password-x");Q.commit("setVerifyCode",r),Xe("password.json",{verifyValue:r,mainPasswordType:b.value,passwordCiphertext:I.value})},et=()=>{Ze("password.json").then(r=>{if(r.verifyValue){let u=r.verifyValue;b.value=r.mainPasswordType||"common",Q.commit("setVerifyCode",u),Q.commit("setMainPasswordType",b.value),I.value=r.passwordCiphertext,E.value.verifyMainPassword(!0)}else A.value=!0,c.value.settingMainPassword()}).catch(r=>{console.error(r),Ge.error("error-1000："+r)})},tt=r=>{U.value=r,o()},lt=r=>{a.value=r},at=r=>{if(!r)return"";let u=[];return Ne(a.value,r,u),u},Ne=(r,u,z)=>{for(let H=0;H<r.length;H++)u.includes(r[H].id)&&z.push(r[H].label),r[H].children&&r[H].children.length>0&&Ne(r[H].children,u,z)},st=()=>{d.value.downloadExcelTemplate()},ot=()=>{d.value.importExcel(a.value)},nt=()=>{d.value.exportExcel(P.value,a.value)},rt=(r,u)=>{if(r.length!==0){for(let z=r.length-1;z>=0;z--)P.value.unshift(r[z]);T.value.setLabelTree(u),ce(),o()}},dt=()=>{v.value.logout()};return He(()=>{let r=qe();for(let u in r)k[u]=r[u];k.language&&k.language!==W.value&&(W.value=k.language),et()}),(r,u)=>{const z=je,H=ie,ae=ue,se=Tt,oe=Mt,Te=Et,pe=Ft,fe=Rt,ee=Dt,be=De,it=Nt,ut=Ut,mt=It,ct=Ue,Ae=Fe,pt=pl,ft=Re,wt=dl,gt=Qe,_t=nl,vt=ll,bt=Xt;return V(),O(Z,null,[t(ft,{id:"passwordBody"},{default:l(()=>[t(Ae,{xl:{span:16,offset:2},lg:{span:19},md:{span:19}},{default:l(()=>[t(ct,null,{header:l(()=>[B("div",fl,[B("div",null,[B("div",wl,[e(P)?(V(),L(z,{key:0,class:"password-table-title"},{default:l(()=>[S(C(e(P).length)+" "+C(e(_)("index.title.passwordCount")),1)]),_:1})):Y("",!0),gl,e(k).showPasswordStrength?(V(),O("div",_l,[t(z,{class:"password-table-strength"},{default:l(()=>[S(C(e(_)("index.title.strength"))+"（ ",1),t(z,{type:"success"},{default:l(()=>[S(C(e(_)("index.title.strength.strong")),1)]),_:1}),S(" : "+C(h(3))+" ",1),t(z,{style:{"margin-left":"5px"},type:"warning"},{default:l(()=>[S(C(e(_)("index.title.strength.medium")),1)]),_:1}),S(" : "+C(h(2))+" ",1),t(z,{style:{"margin-left":"5px"},type:"danger"},{default:l(()=>[S(C(e(_)("index.title.strength.weak")),1)]),_:1}),S(" : "+C(h(1))+"） ",1)]),_:1})])):Y("",!0)])]),B("div",vl,[B("div",null,[t(H,{modelValue:e(s),"onUpdate:modelValue":u[0]||(u[0]=$=>re(s)?s.value=$:null),style:{"max-width":"300px"},clearable:"",placeholder:e(_)("index.title.search"),"prefix-icon":e(jt),disabled:!e(p),onKeyup:Je(o,["enter"])},null,8,["modelValue","placeholder","prefix-icon","disabled","onKeyup"])]),B("div",null,[t(ae,{disabled:!e(p)||!e(A),type:"primary",plain:"",onClick:u[1]||(u[1]=$=>n())},{default:l(()=>[S(C(e(_)("index.title.addPassword")),1)]),_:1},8,["disabled"])]),B("div",null,[e(p)?Y("",!0):(V(),L(se,{key:0,content:e(_)("index.title.unlock"),effect:"dark",placement:"top"},{default:l(()=>[t(ae,{disabled:!e(I),icon:e(Gt),onClick:f},null,8,["disabled","icon"])]),_:1},8,["content"])),e(p)?(V(),L(se,{key:1,content:e(_)("index.title.lock"),effect:"dark",placement:"top"},{default:l(()=>[t(ae,{icon:e(Be),onClick:y},null,8,["icon"])]),_:1},8,["content"])):Y("",!0)]),t(pe,null,{dropdown:l(()=>[t(Te,null,{default:l(()=>[t(oe,{onClick:X},{default:l(()=>[S(C(e(_)("systemSetting.title")),1)]),_:1}),t(oe,{divided:"",onClick:ot},{default:l(()=>[S(C(e(_)("index.title.importExport.import")),1)]),_:1}),t(oe,{onClick:nt},{default:l(()=>[S(C(e(_)("index.title.importExport.export")),1)]),_:1}),t(oe,{onClick:st},{default:l(()=>[S(C(e(_)("index.title.importExport.download")),1)]),_:1}),t(oe,{divided:"",onClick:dt},{default:l(()=>[S(C(e(_)("index.title.logout")),1)]),_:1})]),_:1})]),default:l(()=>[t(ae,{icon:e(Ht)},null,8,["icon"])]),_:1})])])]),default:l(()=>[t(mt,{height:"calc(100vh - 150px)",data:e(N)},{empty:l(()=>[t(fe,{description:e(p)?e(_)("index.table.empty"):e(_)("index.table.lock")},xe({default:l(()=>[t(ae,{onClick:f,plain:"",type:"primary"},{default:l(()=>[S(C(e(_)("index.title.unlock")),1)]),_:1})]),_:2},[e(p)?void 0:{name:"image",fn:l(()=>[t(e(Be))]),key:"0"}]),1032,["description"])]),default:l(()=>[e(k).showPasswordStrength?(V(),L(ee,{key:0,width:"30px"},{default:l($=>[me($.row.password)===3?(V(),L(se,{key:0},{content:l(()=>[S(C(e(_)("index.title.strength")+"："+e(_)("index.title.strength.strong")),1)]),default:l(()=>[bl]),_:1})):Y("",!0),me($.row.password)===2?(V(),L(se,{key:1},{content:l(()=>[S(C(e(_)("index.title.strength")+"："+e(_)("index.title.strength.medium")),1)]),default:l(()=>[yl]),_:1})):Y("",!0),me($.row.password)===1?(V(),L(se,{key:2},{content:l(()=>[S(C(e(_)("index.title.strength")+"："+e(_)("index.title.strength.weak")),1)]),default:l(()=>[hl]),_:1})):Y("",!0)]),_:1})):Y("",!0),t(ee,{label:e(_)("password.name"),"min-width":"140px",prop:"name"},null,8,["label"]),t(ee,{label:e(_)("password.address"),"min-width":"200px",prop:"address"},{default:l($=>[e(Wt)($.row.address)?(V(),L(be,{key:0,href:$.row.address,target:"_blank"},{default:l(()=>[S(C($.row.address),1)]),_:2},1032,["href"])):(V(),L(z,{key:1},{default:l(()=>[S(C($.row.address),1)]),_:2},1024))]),_:1},8,["label"]),t(ee,{label:e(_)("password.userName"),"min-width":"120px",prop:"userName"},null,8,["label"]),t(ee,{label:e(_)("password.password"),"min-width":"200px"},{default:l($=>[$.row.password?(V(),O("div",Pl,[B("span",xl,[$.row.show?Y("",!0):(V(),O(Z,{key:0},[S("•••••••")],64)),$.row.show?(V(),O(Z,{key:1},[S(C($.row.password),1)],64)):Y("",!0)]),B("div",kl,[$.row.show?Y("",!0):(V(),L(e(Jt),{key:0,onClick:te=>$.row.show=!$.row.show},null,8,["onClick"])),$.row.show?(V(),L(e(Ot),{key:1,onClick:te=>$.row.show=!$.row.show},null,8,["onClick"])):Y("",!0),t(e(Kt),{onClick:te=>e(Ee)($.row.password)},null,8,["onClick"])])])):Y("",!0)]),_:1},8,["label"]),t(ee,{label:e(_)("index.table.label"),"min-width":"130px"},{default:l($=>[(V(!0),O(Z,null,ne(at($.row.label),te=>(V(),L(it,{style:{margin:"3px"},key:te},{default:l(()=>[S(C(te),1)]),_:2},1024))),128))]),_:1},8,["label"]),t(ee,{label:e(_)("password.remark"),"min-width":"100px",prop:"remark"},null,8,["label"]),t(ee,{"min-width":"140px",label:e(_)("index.table.operation")},{default:l($=>[t(be,{type:"success",underline:!1,onClick:te=>g($.row)},{default:l(()=>[S(C(e(_)("index.table.share")),1)]),_:2},1032,["onClick"]),t(be,{underline:!1,style:{"margin-left":"10px"},type:"primary",onClick:te=>i($.row)},{default:l(()=>[S(C(e(_)("index.table.edit")),1)]),_:2},1032,["onClick"]),t(ut,{title:e(_)("index.table.operation.affirmDelete"),"confirm-button-text":e(_)("index.table.operation.affirm"),"cancel-button-text":e(_)("index.table.operation.cancel"),onConfirm:te=>F($.row)},{reference:l(()=>[t(be,{style:{"margin-left":"10px"},underline:!1,type:"danger"},{default:l(()=>[S(C(e(_)("index.table.operation.delete")),1)]),_:1})]),_:2},1032,["title","confirm-button-text","cancel-button-text","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),t(Ae,{xl:{span:4},lg:{span:5},md:{span:5},class:"hidden-sm-and-down",style:{"padding-left":"15px"}},{default:l(()=>[t(pt,{ref_key:"labelTreeRef",ref:T,onLabelCheckChange:tt,onLabelTreeChange:lt},null,512)]),_:1})]),_:1}),t(wt,{ref_key:"passwordFormRef",ref:w,labelTree:e(a),onAddPassword:m,onUpdatePassword:x},null,8,["labelTree"]),t(gt,{ref_key:"mainPasswordVerifyRef",ref:E,onVerifyPass:R},null,512),t(_t,{ref_key:"mainPasswordSettingRef",ref:c,onMainPasswordChange:j},null,512),t(vt,{ref_key:"systemSettingRef",ref:v,onUpdateMainPassword:D,onSystemChangeChange:G},null,512),t(bt,{ref_key:"importExportRef",ref:d,labelTree:e(a),onImportComplete:rt},null,8,["labelTree"])],64)}}},Kl=Ke(Cl,[["__scopeId","data-v-15cd6e55"]]);export{Kl as default};
