import{s as _,g as v}from"./el-link-d27a772d.js";import{_ as R,u as C,n as L,p as M,a as x,r as k,o as D,q as O,b as c,d as o,w as n,f as g,e as f,t as q,F as N,a8 as A,v as B,I as U,J as z,R as I,S as P,G as T,l as j,a9 as J,aa as $,k as G,z as Y}from"./index-1efa95a7.js";const Z=""+new URL("backImg-584761fc.svg",import.meta.url).href;const H=i=>(J("data-v-939d58f7"),i=i(),$(),i),Q=H(()=>c("img",{alt:"",class:"back-img",src:Z},null,-1)),W={class:"content"},X={class:"language-div"},ee={class:"content-input"},se={class:"title"},oe={class:"content-button"},te={__name:"LoginPage",setup(i){const{t,locale:d}=C(),y=L(),b=M(),S=x(),a=k({region:"oss-cn-beijing",accessKeyId:"LTAI5tRPBc5sY6KbZd1Vc1jU",accessKeySecret:"4OORS9GloeAn2Jd4Tvluw1Lt0YIj21",bucket:"password-x-demo"}),h=k({region:[{required:!0,message:t("login.form.region.verify"),trigger:"blur"}],accessKeyId:[{required:!0,message:t("login.form.accessKeyId.verify"),trigger:"blur"}],accessKeySecret:[{required:!0,message:t("login.form.accessKeySecret.verify"),trigger:"blur"}],bucket:[{required:!0,message:t("login.form.bucket.verify"),trigger:"blur"}]}),K=async s=>{await s.validate(e=>{e&&A(a).then(l=>{V(l)}).catch(l=>{w(l)})})},V=s=>{B.commit("setOss",s);let e=U(),l=z(e,JSON.stringify(a));localStorage.setItem("ossForm",l),I.success(t("login.form.successMessage")),b.push("/")},w=s=>{let e=s.code;s.code==="RequestError"?e=t("login.form.error.RequestError"):s.code==="InvalidAccessKeyId"?e=t("login.form.error.InvalidAccessKeyId"):s.code==="SignatureDoesNotMatch"?e=t("login.form.error.SignatureDoesNotMatch"):s.code==="AccessDenied"&&(e=t("login.form.error.AccessDenied")),I({type:"error",title:t("login.form.failMessage"),message:e})},p=s=>{d.value=s,_("language",s)};return(()=>{let s=v("language");s?p(s):navigator.language.toLowerCase()!=="zh-cn"&&(d.value="en-us",_("language","en-us"));let e=v("darkMode");if(e)y.value=e;else{let l=window.matchMedia("(prefers-color-scheme: dark)");l&&l.matches&&(y.value=!0,_("darkMode",!0))}})(),(s,e)=>{const l=P,u=G,m=Y,E=T,F=j;return D(),O(N,null,[Q,c("div",W,[c("div",X,[o(l,{type:g(d)==="zh-cn"?"primary":"default",onClick:e[0]||(e[0]=r=>p("zh-cn")),underline:!1},{default:n(()=>[f("简体中文 ")]),_:1},8,["type"]),f(" / "),o(l,{type:g(d)==="en-us"?"primary":"default",onClick:e[1]||(e[1]=r=>p("en-us")),underline:!1},{default:n(()=>[f("English ")]),_:1},8,["type"])]),c("div",ee,[c("div",se,q(g(t)("login.form.title")),1),o(E,{ref_key:"ruleFormRef",ref:S,rules:h,model:a},{default:n(()=>[o(m,{prop:"region"},{default:n(()=>[o(u,{modelValue:a.region,"onUpdate:modelValue":e[2]||(e[2]=r=>a.region=r),clearable:"",placeholder:"OSS region"},null,8,["modelValue"])]),_:1}),o(m,{prop:"accessKeyId"},{default:n(()=>[o(u,{modelValue:a.accessKeyId,"onUpdate:modelValue":e[3]||(e[3]=r=>a.accessKeyId=r),clearable:"",placeholder:"OSS accessKeyId"},null,8,["modelValue"])]),_:1}),o(m,{prop:"accessKeySecret"},{default:n(()=>[o(u,{modelValue:a.accessKeySecret,"onUpdate:modelValue":e[4]||(e[4]=r=>a.accessKeySecret=r),clearable:"",placeholder:"OSS accessKeySecret"},null,8,["modelValue"])]),_:1}),o(m,{prop:"bucket"},{default:n(()=>[o(u,{modelValue:a.bucket,"onUpdate:modelValue":e[5]||(e[5]=r=>a.bucket=r),clearable:"",placeholder:"OSS bucket"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),c("div",oe,[o(F,{type:"primary",style:{width:"100%"},onClick:e[6]||(e[6]=r=>K(g(S)))},{default:n(()=>[f("登录")]),_:1})])])])],64)}}},ne=R(te,[["__scopeId","data-v-939d58f7"]]);export{ne as default};
